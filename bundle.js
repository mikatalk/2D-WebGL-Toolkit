!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(5)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(6),l=n(a),u=r(10),s=n(u),c=Symbol(),f=Symbol(),d=function(){function e(t,r,n){if(i(this,e),t!==c)throw"[Stage] Singleton class, use `Stage.getInstance()` instead.";this.clock=new s["default"],this.layers=[],this.renderer=new l["default"](r,n),this.update(),console.log("[Stage] initialized.")}return o(e,null,[{key:"initialize",value:function(t,r){if(this[f])throw"[Stage] Already initialized.";return this[f]=new e(c,t,r),this[f]}},{key:"getInstance",value:function(){if(!this[f])throw"[Stage] Must first call `Stage.initialize(canvas, options)`.";return this[f]}},{key:"getRenderer",value:function(){return e.getInstance().renderer}},{key:"getGL",value:function(){return e.getInstance().renderer.gl}},{key:"addLayer",value:function(t){e.getInstance().addLayer(t)}},{key:"removeLayer",value:function(t){e.getInstance().removeLayer(t)}},{key:"setLayerIndex",value:function(t,r){e.getInstance().setLayerIndex(t,r)}},{key:"beforeUpdateHandler",value:function(t){e.getInstance().beforeUpdateHandler=t}},{key:"afterUpdateHandler",value:function(t){e.getInstance().afterUpdateHandler=t}}]),o(e,[{key:"update",value:function(){window.requestAnimationFrame(this.update.bind(this));var e=this.clock.tick();this.beforeUpdateHandler&&this.beforeUpdateHandler(e),this.renderer.clear();var t=!0,r=!1,n=void 0;try{for(var i,o=this.layers[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.render(e)}}catch(l){r=!0,n=l}finally{try{!t&&o["return"]&&o["return"]()}finally{if(r)throw n}}this.afterUpdateHandler&&this.afterUpdateHandler(e)}},{key:"addLayer",value:function(e){this.layers.push(e)}},{key:"removeLayer",value:function(e){console.log("[Stage] TO DO: implement removeLayer.")}},{key:"setLayerIndex",value:function(e,t){console.log("[Stage] TO DO: implement setLayerIndex.")}}]),e}();t["default"]=d},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i="\n    void main(void) {\n        gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0); // default debug purple\n    }\n",o="\n    attribute vec3 vertexPos;\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n    void main(void) {\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPos, 1.0);\n    }\n",a=function(){function e(t){if(r(this,e),this.gl=t,this.geometry=this.getDefaultGeometry(t),void 0===this.render)throw new TypeError("Must override method 'render'.");console.log("[Layer] initialized.")}return n(e,[{key:"getDefaultGeometry",value:function(e){var t;t=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t);var r=[1,1,0,-1,1,0,1,-1,0,-1,-1,0];e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW);var n={buffer:t,vertSize:3,nVerts:4,primtype:e.TRIANGLE_STRIP};return n}},{key:"getDefaultFragment",value:function(){return i}},{key:"getDefaultVertex",value:function(){return o}},{key:"createShader",value:function(e,t){var r=this.gl.createShader(t);return this.gl.shaderSource(r,e),this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)?r:(console.error("[Layer] ",this.gl.getShaderInfoLog(r)),null)}},{key:"update",value:function(e){console.warn("Implement update() method for",this)}},{key:"render",value:function(){console.warn("Implement render() method for",this)}}]),e}();t["default"]=a},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(1),l=n(a),u=r(9),s=n(u),c=r(7),f=n(c),d=r(8),h=n(d),p=r(12),g=n(p),m=function(){function e(t){var r=this;i(this,e);var n=new Image;n.onload=function(){return r.init(n)},n.src="assets/img/field.png"}return o(e,[{key:"init",value:function(e){l["default"].initialize(document.getElementById("canvas"),{contain:!0}),this.bg=new h["default"](l["default"].getGL(),e),l["default"].addLayer(this.bg),this.ball=new s["default"](l["default"].getGL()),this.ball.radius=25,l["default"].addLayer(this.ball),this.balls=[];for(var t=0,r=1;r>t;t++){var n=new f["default"](l["default"].getGL(),20,.01);n.speedX=2,n.speedY=3,l["default"].addLayer(n),this.balls.push(n)}l["default"].beforeUpdateHandler(this.update.bind(this)),l["default"].afterUpdateHandler(null),this.lifetime=0,this.stats=new g["default"];var i=document.getElementById("container");i.appendChild(this.stats.domElement),document.addEventListener("mousedown",this.onDocumentMouseDown.bind(this),!1)}},{key:"onDocumentMouseDown",value:function(e){e.preventDefault()}},{key:"update",value:function(e){this.lifetime+=e,this.ball.x=(Math.sin(3*this.lifetime)+1)/2*.8+.1,this.ball.y=(Math.sin(2.6*this.lifetime)+1)/2*.8+.1;var t=!0,r=!1,n=void 0;try{for(var i,o=this.balls[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.x=(Math.sin(this.lifetime*a.speedX)+1)/2*.8+.1,a.y=(Math.sin(this.lifetime*a.speedY)+1)/2*.8+.1}}catch(l){r=!0,n=l}finally{try{!t&&o["return"]&&o["return"]()}finally{if(r)throw n}}this.stats.update()}}]),e}();t["default"]=m},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}r(13);var i=r(11),o=n(i),a=r(4),l=n(a);o["default"].webgl||o["default"].addGetWebGLMessage(),window.addEventListener("load",function(){new l["default"]({})})},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t,n){r(this,e),this.canvas=t,n=n||{},this.contain=n.hasOwnProperty("contain")?n.contain:!0,this.gl=this.initWebGL(t),this.initViewport(this.gl,t),window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),console.log("[Renderer] initialized.")}return n(e,[{key:"initWebGL",value:function(e){var t=void 0;try{t=this.canvas.getContext("webgl",{alpha:!0,antialias:!0,preserveDrawingBuffer:!0})}catch(r){var n="Error creating WebGL Context!: "+r.toString();throw alert(n),Error(n)}return t}},{key:"initViewport",value:function(e,t){e.viewport(0,0,t.width,t.height)}},{key:"clear",value:function(){this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,null),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.enable(this.gl.BLEND),this.gl.disable(this.gl.DEPTH_TEST),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE)}},{key:"onWindowResize",value:function(){var e=1/(this.contain?Math.max:Math.min)(this.canvas.width/window.innerWidth,this.canvas.height/window.innerHeight);canvas.style.transformOrigin="top left",canvas.style.left=((window.innerWidth-this.canvas.width*e)/2).toFixed(2)+"px",canvas.style.top=((window.innerHeight-this.canvas.height*e)/2).toFixed(2)+"px",canvas.style.transform="scale("+e.toFixed(2)+")"}}]),e}();t["default"]=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return"\n\n    precision mediump float;\n\n    varying vec2 uv;\n\n    uniform sampler2D previous;\n\n    const float trail = "+e+"; \n    const float blur = 0.125;\n    const float weight = .88;\n    \n    void main() { \n        \n        vec2 onePixel = vec2(1.0, 1.0) / vec2(512., 512.);\n        vec4 color = texture2D(previous, uv + onePixel * vec2(-1, -1)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 0, -1)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 1, -1)) * blur +\n        texture2D(previous, uv + onePixel * vec2(-1,  0)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 0,  0)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 1,  0)) * blur +\n        texture2D(previous, uv + onePixel * vec2(-1,  1)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 0,  1)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 1,  1)) * blur ;\n        color *= weight;\n        \n        gl_FragColor = color;\n        gl_FragColor.a -= trail;\n\n        if ( gl_FragColor.a < 0.2 ) gl_FragColor = vec4(0.0);\n        // if ( gl_FragColor.a < 0.101 && gl_FragColor.a > 0.1 ) gl_FragColor = vec4(0.101/ gl_FragColor.a, .101/ gl_FragColor.a, .101/ gl_FragColor.a, .101/ gl_FragColor.a);\n        // if ( gl_FragColor.a < 0.101 && gl_FragColor.a > 0.1 ) gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n    }\n"}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function v(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:v(i,t,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},c=r(2),f=n(c),d=r(1),h=(n(d),"\n\n    precision mediump float;\n\n    varying vec2 uv;\n\n    uniform vec4 dot;\n    \n    void main() {\n        vec4 color = vec4(0.0);\n        float radius = 1.0 / 512.0 * dot.z;\n        float b = ( 1.0 - length( ( dot.xy - uv ) / radius ) );\n        color.r = b;\n        color.g = b*.4;\n        color.b = b;\n        color.a = b;\n        gl_FragColor = color;\n    }\n"),p="\n\n    precision mediump float;\n\n    varying vec2 uv;\n\n    uniform sampler2D ball;\n    uniform sampler2D previous;\n\n    void main() { \n\n        vec4 colorBall = texture2D(ball, uv);\n        vec4 colorPrevious = texture2D(previous, uv);\n\n        gl_FragColor = vec4(0.0);\n        gl_FragColor.a = colorBall.a + colorPrevious.a;\n\n        gl_FragColor.r = gl_FragColor.a;\n        gl_FragColor.g = gl_FragColor.a*.4;\n        gl_FragColor.b = gl_FragColor.a;\n\n    }\n",g="\n    \n    precision mediump float;\n\n    const vec2 mid=vec2(0.5,0.5);\n    attribute vec2 vertexPosition;\n    varying vec2 uv;\n    \n    void main() {\n       uv = vertexPosition.xy * mid + mid; // scale vertex attribute to [0-1] range\n       gl_Position = vec4(vertexPosition.xy,0.0,1.0);\n    }\n\n",m=function(e){function t(e,r,n){i(this,t);var a=o(this,Object.getPrototypeOf(t).call(this,e));return a.lifetime=0,a.dot=new Float32Array([.5,.5,r,n]),a.initTextureBuffers(e),a.pointersBall=a.initShaderBall(e),a.pointersMerge=a.initShaderMerge(e),a.pointersPreviousFrame=a.initShaderPreviousFrame(e),a}return a(t,e),u(t,[{key:"initTextureBuffers",value:function(e){this.ballRTT=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.ballRTT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.texImage2D(this.gl.TEXTURE_2D,0,e.RGBA,512,512,0,e.RGBA,e.UNSIGNED_BYTE,null),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null),this.ballFrameBuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.ballFrameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.ballRTT,0),this.ballFrameBuffer.width=512,this.ballFrameBuffer.height=512,e.bindFramebuffer(e.FRAMEBUFFER,null),this.previousRTT=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.previousRTT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.texImage2D(this.gl.TEXTURE_2D,0,e.RGBA,512,512,0,e.RGBA,e.UNSIGNED_BYTE,null),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null),this.previousFrameBuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.previousFrameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.previousRTT,0),this.previousFrameBuffer.width=512,this.previousFrameBuffer.height=512,e.bindFramebuffer(e.FRAMEBUFFER,null),this.mergeRTT=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.mergeRTT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.texImage2D(this.gl.TEXTURE_2D,0,e.RGBA,512,512,0,e.RGBA,e.UNSIGNED_BYTE,null),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null),this.mergeFrameBuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.mergeFrameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.mergeRTT,0),this.mergeFrameBuffer.width=512,this.mergeFrameBuffer.height=512,e.bindFramebuffer(e.FRAMEBUFFER,null)}},{key:"initShaderBall",value:function(e){var r=s(Object.getPrototypeOf(t.prototype),"createShader",this).call(this,h,e.FRAGMENT_SHADER),n=s(Object.getPrototypeOf(t.prototype),"createShader",this).call(this,g,e.VERTEX_SHADER);this.programBall=e.createProgram(),e.attachShader(this.programBall,n),e.attachShader(this.programBall,r),e.linkProgram(this.programBall);var i={vertexPosition:e.getAttribLocation(this.programBall,"vertexPosition"),dot:e.getUniformLocation(this.programBall,"dot")};return e.enableVertexAttribArray(i.vertexPosition),this.validateProgram(this.programBall),i}},{key:"initShaderMerge",value:function(e){var r=s(Object.getPrototypeOf(t.prototype),"createShader",this).call(this,p,e.FRAGMENT_SHADER),n=s(Object.getPrototypeOf(t.prototype),"createShader",this).call(this,g,e.VERTEX_SHADER);this.programMerge=e.createProgram(),e.attachShader(this.programMerge,n),e.attachShader(this.programMerge,r),e.linkProgram(this.programMerge);var i={vertexPosition:e.getAttribLocation(this.programMerge,"vertexPosition"),ball:e.getUniformLocation(this.programMerge,"ball"),previous:e.getUniformLocation(this.programMerge,"previous")};return e.enableVertexAttribArray(i.vertexPosition),this.validateProgram(this.programMerge),i}},{key:"initShaderPreviousFrame",value:function(e){var r=s(Object.getPrototypeOf(t.prototype),"createShader",this).call(this,l(this.dot[3].toFixed(2)),e.FRAGMENT_SHADER),n=s(Object.getPrototypeOf(t.prototype),"createShader",this).call(this,g,e.VERTEX_SHADER);this.programPreviousFrame=e.createProgram(),e.attachShader(this.programPreviousFrame,n),e.attachShader(this.programPreviousFrame,r),e.linkProgram(this.programPreviousFrame);var i={vertexPosition:e.getAttribLocation(this.programPreviousFrame,"vertexPosition"),previous:e.getUniformLocation(this.programPreviousFrame,"previous")};return e.enableVertexAttribArray(i.vertexPosition),this.validateProgram(this.programPreviousFrame),i}},{key:"validateProgram",value:function(e){this.gl.getProgramParameter(e,this.gl.LINK_STATUS)||console.error("[LayerBall] Could not initialize shaders")}},{key:"render",value:function(e){this.lifetime+=e;var t=this.gl;t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.DST_ALPHA),t.bindBuffer(t.ARRAY_BUFFER,this.geometry.buffer),t.useProgram(this.programBall),t.vertexAttribPointer(this.pointersBall.vertexPosition,this.geometry.vertSize,t.FLOAT,!1,0,0),t.uniform4fv(this.pointersBall.dot,this.dot),t.bindFramebuffer(t.FRAMEBUFFER,this.ballFrameBuffer),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(this.geometry.primtype,0,this.geometry.nVerts),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,this.mergeFrameBuffer),t.useProgram(this.programMerge),t.vertexAttribPointer(this.pointersMerge.vertexPosition,this.geometry.vertSize,t.FLOAT,!1,0,0),t.uniform1i(this.pointersMerge.ball,0),t.uniform1i(this.pointersMerge.previous,1),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.ballRTT),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.previousRTT),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(this.geometry.primtype,0,this.geometry.nVerts),t.bindFramebuffer(t.FRAMEBUFFER,this.previousFrameBuffer),t.useProgram(this.programPreviousFrame),t.vertexAttribPointer(this.pointersPreviousFrame.vertexPosition,this.geometry.vertSize,t.FLOAT,!1,0,0),t.uniform1i(this.pointersPreviousFrame.previous,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.mergeRTT),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(this.geometry.primtype,0,this.geometry.nVerts),t.blendFunc(t.SRC_ALPHA,t.ONE),t.bindFramebuffer(t.FRAMEBUFFER,null),t.drawArrays(this.geometry.primtype,0,this.geometry.nVerts)}},{key:"x",set:function(e){this.dot[0]=e}},{key:"y",set:function(e){this.dot[1]=e}},{key:"radius",set:function(e){this.dot[2]=e}},{key:"trail",set:function(e){this.dot[3]=e}}]),t}(f["default"]);t["default"]=m},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function g(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:g(i,t,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},s=r(2),c=n(s),f=r(1),d=(n(f),"\n\n    precision mediump float;\n\n    varying vec2 uv;\n    \n    uniform sampler2D image;\n\n    void main() { \n        gl_FragColor = texture2D(image, uv);\n    }\n"),h="\n    \n    precision mediump float;\n\n    const vec2 mid=vec2(0.5,0.5);\n    attribute vec2 vertexPosition;\n    varying vec2 uv;\n    \n    void main() {\n       uv = vertexPosition.xy * mid + mid; // scale vertex attribute to [0-1] range\n       gl_Position = vec4(vertexPosition.xy,0.0,1.0);\n    }\n    \n",p=function(e){function t(e,r){i(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.texture=e.createTexture(),n.img=r,n.ready=!0,e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null),n.program=n.initShader(e),n.lifetime=0,n.dot=new Float32Array([.5,.5,30,.5]),n}return a(t,e),l(t,[{key:"initShader",value:function(e){var r=u(Object.getPrototypeOf(t.prototype),"createShader",this).call(this,d,e.FRAGMENT_SHADER),n=u(Object.getPrototypeOf(t.prototype),"createShader",this).call(this,h,e.VERTEX_SHADER);return this.program=e.createProgram(),e.attachShader(this.program,n),e.attachShader(this.program,r),e.linkProgram(this.program),this.shaderVertexPositionAttribute=e.getAttribLocation(this.program,"vertexPosition"),e.enableVertexAttribArray(this.shaderVertexPositionAttribute),e.getProgramParameter(this.program,e.LINK_STATUS)||console.error("[LayerBall] Could not initialize shaders"),this.program}},{key:"render",value:function(e){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.geometry.buffer),t.useProgram(this.program),t.vertexAttribPointer(this.shaderVertexPositionAttribute,this.geometry.vertSize,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.texture),t.uniform1i(this.program.samplerUniform,0),t.drawArrays(this.geometry.primtype,0,this.geometry.nVerts)}}]),t}(c["default"]);t["default"]=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function g(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:g(i,t,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},s=r(2),c=n(s),f=r(1),d=(n(f),"\n\n    precision mediump float;\n\n    varying vec2 uv;\n\n    uniform vec4 dot;\n    \n    void main() {\n        vec4 color = vec4(0.0);\n        float radius = dot.z; // get the radius from dot[2]\n        vec2 pixelRatio = vec2(1.0, 1.0) / vec2(512.0, 512.0) * radius;\n        float b = ( 1.0 - length( ( dot.xy - uv ) / pixelRatio ) );\n        if ( b < .1 ) b = .0; \n        color.r = b;\n        color.g = b;\n        color.b = 0.0;\n        color.a = b;\n        gl_FragColor = color;\n    }\n"),h="\n    \n    precision mediump float;\n\n    const vec2 mid=vec2(0.5,0.5);\n    attribute vec2 vertexPosition;\n    varying vec2 uv;\n    \n    void main() {\n       uv = vertexPosition.xy * mid + mid; // scale vertex attribute to [0-1] range\n       gl_Position = vec4(vertexPosition.xy,0.0,1.0);\n    }\n    \n",p=function(e){function t(e){i(this,t);var r=o(this,Object.getPrototypeOf(t).call(this,e));return r.program=r.initShader(e),r.lifetime=0,r.dot=new Float32Array([.5,.5,30,.5]),r}return a(t,e),l(t,[{key:"initShader",value:function(e){var r=u(Object.getPrototypeOf(t.prototype),"createShader",this).call(this,d,e.FRAGMENT_SHADER),n=u(Object.getPrototypeOf(t.prototype),"createShader",this).call(this,h,e.VERTEX_SHADER);return this.program=e.createProgram(),e.attachShader(this.program,n),e.attachShader(this.program,r),e.linkProgram(this.program),this.shaderVertexPositionAttribute=e.getAttribLocation(this.program,"vertexPosition"),e.enableVertexAttribArray(this.shaderVertexPositionAttribute),e.getProgramParameter(this.program,e.LINK_STATUS)||console.error("[LayerBall] Could not initialize shaders"),this.program}},{key:"render",value:function(e){this.lifetime+=e;var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.geometry.buffer),t.useProgram(this.program),t.vertexAttribPointer(this.shaderVertexPositionAttribute,this.geometry.vertSize,t.FLOAT,!1,0,0),t.uniform4fv(t.getUniformLocation(this.program,"dot"),this.dot),t.drawArrays(this.geometry.primtype,0,this.geometry.nVerts)}},{key:"x",set:function(e){this.dot[0]=e}},{key:"y",set:function(e){this.dot[1]=e}},{key:"radius",set:function(e){this.dot[2]=e}},{key:"trail",set:function(e){this.dot[3]=e}}]),t}(c["default"]);t["default"]=p},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){r(this,e),this.timeBefore=Date.now(),this.lifeTime=0,this.elapsedTime=0}return n(e,[{key:"tick",value:function(){return this.elapsedTime=Date.now()-this.timeBefore,this.timeBefore=Date.now(),this.lifeTime+=this.elapsedTime,this.elapsedTime/1e3}}]),e}();t["default"]=i},function(e,t,r){(function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(e){var t,n,i;e=e||{},t=void 0!==e.parent?e.parent:document.body,n=void 0!==e.id?e.id:"oldie",i=r.getWebGLErrorMessage(),i.id=n,t.appendChild(i)}};"object"===t(e)&&(e.exports=r)}).call(t,r(3)(e))},function(e,t,r){(function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=function(){function e(e,t,r){return e=document.createElement(e),e.id=t,e.style.cssText=r,e}function t(t,r,n){var i=e("div",t,"padding:0 0 3px 3px;text-align:left;background:"+n),o=e("div",t+"Text","font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:"+r);for(o.innerHTML=t.toUpperCase(),i.appendChild(o),t=e("div",t+"Graph","width:74px;height:30px;background:"+r),i.appendChild(t),r=0;74>r;r++)t.appendChild(e("span","","width:1px;height:30px;float:left;opacity:0.9;background:"+n));return i}function r(e){for(var t=s.children,r=0;r<t.length;r++)t[r].style.display=r===e?"block":"none";u=e}function n(e,t){e.appendChild(e.firstChild).style.height=Math.min(30,30-30*t)+"px"}var i=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,o=i(),a=o,l=0,u=0,s=e("div","stats","width:80px;opacity:0.9;cursor:pointer");s.addEventListener("mousedown",function(e){e.preventDefault(),r(++u%s.children.length)},!1);var c=0,f=1/0,d=0,h=t("fps","#0ff","#002"),p=h.children[0],g=h.children[1];s.appendChild(h);var m=0,v=1/0,b=0,h=t("ms","#0f0","#020"),y=h.children[0],E=h.children[1];if(s.appendChild(h),self.performance&&self.performance.memory){var T=0,R=1/0,x=0,h=t("mb","#f08","#201"),F=h.children[0],_=h.children[1];s.appendChild(h)}return r(u),{REVISION:14,domElement:s,setMode:r,begin:function(){o=i()},end:function(){var e=i();if(m=e-o,v=Math.min(v,m),b=Math.max(b,m),y.textContent=(0|m)+" MS ("+(0|v)+"-"+(0|b)+")",n(E,m/200),l++,e>a+1e3&&(c=Math.round(1e3*l/(e-a)),f=Math.min(f,c),d=Math.max(d,c),p.textContent=c+" FPS ("+f+"-"+d+")",n(g,c/100),a=e,l=0,void 0!==T)){var t=performance.memory.usedJSHeapSize,r=performance.memory.jsHeapSizeLimit;T=Math.round(9.54e-7*t),R=Math.min(R,T),x=Math.max(x,T),F.textContent=T+" MB ("+R+"-"+x+")",n(_,t/r)}return e},update:function(){o=this.end()}}};"object"===t(e)&&(e.exports=r)}).call(t,r(3)(e))},function(e,t){}]);
//# sourceMappingURL=bundle.js.map