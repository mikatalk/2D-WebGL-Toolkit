{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap a93629f0ca54739f714c","webpack:///./src/js/core/Stage.js","webpack:///./src/js/layers/Layer.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/js/Game.js","webpack:///./src/js/Main.js","webpack:///./src/js/core/Renderer.js","webpack:///./src/js/layers/LayerBallTrail.js","webpack:///./src/js/layers/LayerImage.js","webpack:///./src/js/layers/LayerSimpleBall.js","webpack:///./src/js/utils/Clock.js","webpack:///./src/js/vendors/Detector.js","webpack:///./src/js/vendors/Stats.min.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_Renderer","_Renderer2","_Clock","_Clock2","singletonEnforcer","Symbol","Stage","enforcer","canvas","options","this","clock","layers","renderer","update","console","log","getInstance","gl","layer","addLayer","removeLayer","index","setLayerIndex","callback","beforeUpdateHandler","afterUpdateHandler","window","requestAnimationFrame","bind","elapsedTime","tick","clear","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","iterator","next","done","render","err","push","DEFAULT_FRAGMENT","DEFAULT_VERTEX","Layer","geometry","getDefaultGeometry","vertexBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","verts","bufferData","Float32Array","STATIC_DRAW","square","buffer","vertSize","nVerts","primtype","TRIANGLE_STRIP","str","type","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","error","getShaderInfoLog","warn","webpackPolyfill","deprecate","paths","children","_Stage","_Stage2","_LayerSimpleBall","_LayerSimpleBall2","_LayerBallTrail","_LayerBallTrail2","_LayerImage","_LayerImage2","_Stats","_Stats2","Game","_this","image","Image","onload","init","src","bgImg","initialize","document","getElementById","contain","bg","getGL","ball","radius","balls","l","speedX","speedY","lifetime","stats","container","appendChild","domElement","addEventListener","onDocumentMouseDown","event","preventDefault","x","Math","sin","y","_Detector","_Detector2","_Game","_Game2","webgl","addGetWebGLMessage","Renderer","hasOwnProperty","initWebGL","initViewport","onWindowResize","getContext","alpha","antialias","preserveDrawingBuffer","e","msg","toString","alert","Error","viewport","width","height","bindTexture","TEXTURE_2D","bindRenderbuffer","RENDERBUFFER","bindFramebuffer","FRAMEBUFFER","clearColor","COLOR_BUFFER_BIT","enable","BLEND","disable","DEPTH_TEST","blendFunc","SRC_ALPHA","ONE","scale","max","min","innerWidth","innerHeight","style","transformOrigin","left","toFixed","top","transform","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","getFragmentPreviousFrame","trail","_get","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","_Layer2","_Layer3","FRAGMENT_BALL","FRAGMENT_MERGE","VERTEX","LayerSimpleBall","_Layer","dot","initTextureBuffers","pointersBall","initShaderBall","pointersMerge","initShaderMerge","pointersPreviousFrame","initShaderPreviousFrame","ballRTT","createTexture","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_NEAREST","texImage2D","RGBA","UNSIGNED_BYTE","generateMipmap","ballFrameBuffer","createFramebuffer","framebufferTexture2D","COLOR_ATTACHMENT0","previousRTT","previousFrameBuffer","mergeRTT","mergeFrameBuffer","fragmentShader","FRAGMENT_SHADER","vertexShader","VERTEX_SHADER","programBall","createProgram","attachShader","linkProgram","pointers","vertexPosition","getAttribLocation","getUniformLocation","enableVertexAttribArray","validateProgram","programMerge","previous","programPreviousFrame","program","getProgramParameter","LINK_STATUS","blendEquation","FUNC_ADD","DST_ALPHA","useProgram","vertexAttribPointer","FLOAT","uniform4fv","drawArrays","uniform1i","activeTexture","TEXTURE0","TEXTURE1","set","FRAGMENT","LayerImage","img","texture","ready","initShader","shaderVertexPositionAttribute","samplerUniform","Clock","timeBefore","Date","now","lifeTime","_typeof","Detector","CanvasRenderingContext2D","createElement","WebGLRenderingContext","workers","Worker","fileapi","File","FileReader","FileList","Blob","getWebGLErrorMessage","element","fontFamily","fontSize","fontWeight","textAlign","background","color","padding","margin","innerHTML","join","parameters","body","Stats","f","a","b","cssText","d","toUpperCase","display","n","firstChild","q","performance","k","r","t","u","Infinity","v","A","B","g","w","C","D","memory","h","z","E","F","REVISION","setMode","begin","end","textContent","round","usedJSHeapSize","jsHeapSizeLimit"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(5);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Renderer = __webpack_require__(6);\n\t\n\tvar _Renderer2 = _interopRequireDefault(_Renderer);\n\t\n\tvar _Clock = __webpack_require__(10);\n\t\n\tvar _Clock2 = _interopRequireDefault(_Clock);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar singletonEnforcer = Symbol();\n\tvar instance = Symbol();\n\t\n\tvar Stage = function () {\n\t    _createClass(Stage, null, [{\n\t        key: 'initialize',\n\t        value: function initialize(canvas, options) {\n\t\n\t            if (this[instance]) {\n\t                throw '[Stage] Already initialized.';\n\t            }\n\t\n\t            this[instance] = new Stage(singletonEnforcer, canvas, options);\n\t            return this[instance];\n\t        }\n\t    }, {\n\t        key: 'getInstance',\n\t        value: function getInstance() {\n\t\n\t            if (!this[instance]) {\n\t                throw '[Stage] Must first call `Stage.initialize(canvas, options)`.';\n\t            }\n\t            return this[instance];\n\t        }\n\t    }, {\n\t        key: 'getRenderer',\n\t        value: function getRenderer() {\n\t            return Stage.getInstance().renderer;\n\t        }\n\t    }, {\n\t        key: 'getGL',\n\t        value: function getGL() {\n\t            return Stage.getInstance().renderer.gl;\n\t        }\n\t    }, {\n\t        key: 'addLayer',\n\t        value: function addLayer(layer) {\n\t            Stage.getInstance().addLayer(layer);\n\t        }\n\t    }, {\n\t        key: 'removeLayer',\n\t        value: function removeLayer(layer) {\n\t            Stage.getInstance().removeLayer(layer);\n\t        }\n\t    }, {\n\t        key: 'setLayerIndex',\n\t        value: function setLayerIndex(layer, index) {\n\t            Stage.getInstance().setLayerIndex(layer, index);\n\t        }\n\t    }, {\n\t        key: 'beforeUpdateHandler',\n\t        value: function beforeUpdateHandler(callback) {\n\t            Stage.getInstance().beforeUpdateHandler = callback;\n\t        }\n\t    }, {\n\t        key: 'afterUpdateHandler',\n\t        value: function afterUpdateHandler(callback) {\n\t            Stage.getInstance().afterUpdateHandler = callback;\n\t        }\n\t    }]);\n\t\n\t    function Stage(enforcer, canvas, options) {\n\t        _classCallCheck(this, Stage);\n\t\n\t        if (enforcer !== singletonEnforcer) {\n\t            throw '[Stage] Singleton class, use `Stage.getInstance()` instead.';\n\t        }\n\t\n\t        this.clock = new _Clock2.default();\n\t\n\t        this.layers = [];\n\t\n\t        this.renderer = new _Renderer2.default(canvas, options);\n\t\n\t        this.update();\n\t\n\t        console.log('[Stage] initialized.');\n\t    }\n\t\n\t    _createClass(Stage, [{\n\t        key: 'update',\n\t        value: function update() {\n\t\n\t            window.requestAnimationFrame(this.update.bind(this));\n\t\n\t            var elapsedTime = this.clock.tick();\n\t\n\t            if (this.beforeUpdateHandler) this.beforeUpdateHandler(elapsedTime);\n\t\n\t            this.renderer.clear();\n\t\n\t            var _iteratorNormalCompletion = true;\n\t            var _didIteratorError = false;\n\t            var _iteratorError = undefined;\n\t\n\t            try {\n\t                for (var _iterator = this.layers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t                    var layer = _step.value;\n\t                    layer.render(elapsedTime);\n\t                }\n\t            } catch (err) {\n\t                _didIteratorError = true;\n\t                _iteratorError = err;\n\t            } finally {\n\t                try {\n\t                    if (!_iteratorNormalCompletion && _iterator.return) {\n\t                        _iterator.return();\n\t                    }\n\t                } finally {\n\t                    if (_didIteratorError) {\n\t                        throw _iteratorError;\n\t                    }\n\t                }\n\t            }\n\t\n\t            if (this.afterUpdateHandler) this.afterUpdateHandler(elapsedTime);\n\t        }\n\t    }, {\n\t        key: 'addLayer',\n\t        value: function addLayer(layer) {\n\t            this.layers.push(layer);\n\t        }\n\t    }, {\n\t        key: 'removeLayer',\n\t        value: function removeLayer(layer) {\n\t            console.log('[Stage] TO DO: implement removeLayer.');\n\t        }\n\t    }, {\n\t        key: 'setLayerIndex',\n\t        value: function setLayerIndex(layer, index) {\n\t            console.log('[Stage] TO DO: implement setLayerIndex.');\n\t        }\n\t    }]);\n\t\n\t    return Stage;\n\t}();\n\t\n\texports.default = Stage;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar DEFAULT_FRAGMENT = \"\\n    void main(void) {\\n        gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0); // default debug purple\\n    }\\n\";\n\t\n\tvar DEFAULT_VERTEX = \"\\n    attribute vec3 vertexPos;\\n    uniform mat4 modelViewMatrix;\\n    uniform mat4 projectionMatrix;\\n    void main(void) {\\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPos, 1.0);\\n    }\\n\";\n\t\n\tvar Layer = function () {\n\t    function Layer(gl) {\n\t        _classCallCheck(this, Layer);\n\t\n\t        this.gl = gl;\n\t\n\t        this.geometry = this.getDefaultGeometry(gl);\n\t\n\t        if (this.render === undefined) throw new TypeError(\"Must override method 'render'.\");\n\t\n\t        console.log('[Layer] initialized.');\n\t    }\n\t\n\t    _createClass(Layer, [{\n\t        key: \"getDefaultGeometry\",\n\t        value: function getDefaultGeometry(gl) {\n\t\n\t            var vertexBuffer;\n\t            vertexBuffer = gl.createBuffer();\n\t            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n\t            var verts = [1.0, 1.0, 0.0, -1.0, 1.0, 0.0, 1.0, -1.0, 0.0, -1.0, -1.0, 0.0];\n\t            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verts), gl.STATIC_DRAW);\n\t            var square = { buffer: vertexBuffer, vertSize: 3, nVerts: 4, primtype: gl.TRIANGLE_STRIP };\n\t            return square;\n\t        }\n\t    }, {\n\t        key: \"getDefaultFragment\",\n\t        value: function getDefaultFragment() {\n\t            return DEFAULT_FRAGMENT;\n\t        }\n\t    }, {\n\t        key: \"getDefaultVertex\",\n\t        value: function getDefaultVertex() {\n\t            return DEFAULT_VERTEX;\n\t        }\n\t    }, {\n\t        key: \"createShader\",\n\t        value: function createShader(str, type) {\n\t            var shader = this.gl.createShader(type);\n\t            this.gl.shaderSource(shader, str);\n\t            this.gl.compileShader(shader);\n\t            if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\n\t                console.error('[Layer] ', this.gl.getShaderInfoLog(shader));\n\t                return null;\n\t            }\n\t            return shader;\n\t        }\n\t    }, {\n\t        key: \"update\",\n\t        value: function update(elapsedTime) {\n\t            console.warn('Implement update() method for', this);\n\t        }\n\t    }, {\n\t        key: \"render\",\n\t        value: function render() {\n\t            console.warn('Implement render() method for', this);\n\t        }\n\t    }]);\n\t\n\t    return Layer;\n\t}();\n\t\n\texports.default = Layer;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(module) {\r\n\t\tif(!module.webpackPolyfill) {\r\n\t\t\tmodule.deprecate = function() {};\r\n\t\t\tmodule.paths = [];\r\n\t\t\t// module.parent = undefined by default\r\n\t\t\tmodule.children = [];\r\n\t\t\tmodule.webpackPolyfill = 1;\r\n\t\t}\r\n\t\treturn module;\r\n\t}\r\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Stage = __webpack_require__(1);\n\t\n\tvar _Stage2 = _interopRequireDefault(_Stage);\n\t\n\tvar _LayerSimpleBall = __webpack_require__(9);\n\t\n\tvar _LayerSimpleBall2 = _interopRequireDefault(_LayerSimpleBall);\n\t\n\tvar _LayerBallTrail = __webpack_require__(7);\n\t\n\tvar _LayerBallTrail2 = _interopRequireDefault(_LayerBallTrail);\n\t\n\tvar _LayerImage = __webpack_require__(8);\n\t\n\tvar _LayerImage2 = _interopRequireDefault(_LayerImage);\n\t\n\tvar _Stats = __webpack_require__(12);\n\t\n\tvar _Stats2 = _interopRequireDefault(_Stats);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Game = function () {\n\t    function Game(options) {\n\t        var _this = this;\n\t\n\t        _classCallCheck(this, Game);\n\t\n\t        var image = new Image();\n\t        image.onload = function () {\n\t            return _this.init(image);\n\t        };\n\t        image.src = 'assets/img/field.png';\n\t    }\n\t\n\t    _createClass(Game, [{\n\t        key: 'init',\n\t        value: function init(bgImg) {\n\t\n\t            _Stage2.default.initialize(document.getElementById('canvas'), {\n\t                contain: true\n\t            });\n\t\n\t            this.bg = new _LayerImage2.default(_Stage2.default.getGL(), bgImg);\n\t            _Stage2.default.addLayer(this.bg);\n\t\n\t            this.ball = new _LayerSimpleBall2.default(_Stage2.default.getGL());\n\t            this.ball.radius = 25.0;\n\t            _Stage2.default.addLayer(this.ball);\n\t\n\t            this.balls = [];\n\t            for (var i = 0, l = 1; i < l; i++) {\n\t                var ball = new _LayerBallTrail2.default(_Stage2.default.getGL(), 20, .01);\n\t                ball.speedX = 2;\n\t                ball.speedY = 3;\n\t                _Stage2.default.addLayer(ball);\n\t                this.balls.push(ball);\n\t            }\n\t\n\t            _Stage2.default.beforeUpdateHandler(this.update.bind(this));\n\t            _Stage2.default.afterUpdateHandler(null);\n\t\n\t            this.lifetime = 0;\n\t\n\t            this.stats = new _Stats2.default();\n\t\n\t            var container = document.getElementById('container');\n\t            container.appendChild(this.stats.domElement);\n\t\n\t            document.addEventListener('mousedown', this.onDocumentMouseDown.bind(this), false);\n\t        }\n\t    }, {\n\t        key: 'onDocumentMouseDown',\n\t        value: function onDocumentMouseDown(event) {\n\t\n\t            event.preventDefault();\n\t        }\n\t    }, {\n\t        key: 'update',\n\t        value: function update(elapsedTime) {\n\t\n\t            this.lifetime += elapsedTime;\n\t\n\t            this.ball.x = (Math.sin(this.lifetime * 3) + 1) / 2 * .8 + .1;\n\t            this.ball.y = (Math.sin(this.lifetime * 2.6) + 1) / 2 * .8 + .1;\n\t\n\t            var _iteratorNormalCompletion = true;\n\t            var _didIteratorError = false;\n\t            var _iteratorError = undefined;\n\t\n\t            try {\n\t                for (var _iterator = this.balls[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t                    var ball = _step.value;\n\t\n\t                    ball.x = (Math.sin(this.lifetime * ball.speedX) + 1) / 2 * .8 + .1;\n\t                    ball.y = (Math.sin(this.lifetime * ball.speedY) + 1) / 2 * .8 + .1;\n\t                }\n\t            } catch (err) {\n\t                _didIteratorError = true;\n\t                _iteratorError = err;\n\t            } finally {\n\t                try {\n\t                    if (!_iteratorNormalCompletion && _iterator.return) {\n\t                        _iterator.return();\n\t                    }\n\t                } finally {\n\t                    if (_didIteratorError) {\n\t                        throw _iteratorError;\n\t                    }\n\t                }\n\t            }\n\t\n\t            this.stats.update();\n\t        }\n\t    }]);\n\t\n\t    return Game;\n\t}();\n\t\n\texports.default = Game;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(13);\n\t\n\tvar _Detector = __webpack_require__(11);\n\t\n\tvar _Detector2 = _interopRequireDefault(_Detector);\n\t\n\tvar _Game = __webpack_require__(4);\n\t\n\tvar _Game2 = _interopRequireDefault(_Game);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tif (!_Detector2.default.webgl) _Detector2.default.addGetWebGLMessage();\n\t\n\twindow.addEventListener('load', function () {\n\t    var game = new _Game2.default({});\n\t});\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Renderer = function () {\n\t    function Renderer(canvas, options) {\n\t        _classCallCheck(this, Renderer);\n\t\n\t        this.canvas = canvas;\n\t\n\t        options = options || {};\n\t        this.contain = options.hasOwnProperty('contain') ? options.contain : true;\n\t\n\t        this.gl = this.initWebGL(canvas);\n\t        this.initViewport(this.gl, canvas);\n\t\n\t        window.addEventListener('resize', this.onWindowResize.bind(this), false);\n\t        this.onWindowResize();\n\t\n\t        console.log('[Renderer] initialized.');\n\t    }\n\t\n\t    _createClass(Renderer, [{\n\t        key: 'initWebGL',\n\t        value: function initWebGL(canvas) {\n\t            var gl = void 0;\n\t            try {\n\t                gl = this.canvas.getContext('webgl', {\n\t                    alpha: true,\n\t                    // depth: true,\n\t                    // stencil:true,\n\t                    antialias: true,\n\t                    // premultipliedAlpha: true,\n\t                    preserveDrawingBuffer: true\n\t                });\n\t            } // failIfMajorPerformanceCaveat: true\n\t            catch (e) {\n\t                var msg = \"Error creating WebGL Context!: \" + e.toString();\n\t                alert(msg);\n\t                throw Error(msg);\n\t            }\n\t            return gl;\n\t        }\n\t    }, {\n\t        key: 'initViewport',\n\t        value: function initViewport(gl, canvas) {\n\t            gl.viewport(0, 0, canvas.width, canvas.height);\n\t        }\n\t    }, {\n\t        key: 'clear',\n\t        value: function clear() {\n\t\n\t            this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n\t            this.gl.bindRenderbuffer(this.gl.RENDERBUFFER, null);\n\t            this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, null);\n\t\n\t            this.gl.clearColor(0.0, 0.0, 0.0, 0.0);\n\t            this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n\t\n\t            this.gl.enable(this.gl.BLEND);\n\t            this.gl.disable(this.gl.DEPTH_TEST);\n\t            this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE);\n\t        }\n\t    }, {\n\t        key: 'onWindowResize',\n\t        value: function onWindowResize() {\n\t\n\t            var scale = 1 / (this.contain ? Math.max : Math.min)(this.canvas.width / window.innerWidth, this.canvas.height / window.innerHeight);\n\t            canvas.style.transformOrigin = 'top left';\n\t            canvas.style.left = ((window.innerWidth - this.canvas.width * scale) / 2).toFixed(2) + 'px';\n\t            canvas.style.top = ((window.innerHeight - this.canvas.height * scale) / 2).toFixed(2) + 'px';\n\t            canvas.style.transform = 'scale(' + scale.toFixed(2) + ')';\n\t        }\n\t    }]);\n\t\n\t    return Renderer;\n\t}();\n\t\n\texports.default = Renderer;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _Layer2 = __webpack_require__(2);\n\t\n\tvar _Layer3 = _interopRequireDefault(_Layer2);\n\t\n\tvar _Stage = __webpack_require__(1);\n\t\n\tvar _Stage2 = _interopRequireDefault(_Stage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar FRAGMENT_BALL = '\\n\\n    precision mediump float;\\n\\n    varying vec2 uv;\\n\\n    uniform vec4 dot;\\n    \\n    void main() {\\n        vec4 color = vec4(0.0);\\n        float radius = 1.0 / 512.0 * dot.z;\\n        float b = ( 1.0 - length( ( dot.xy - uv ) / radius ) );\\n        color.r = b;\\n        color.g = b*.4;\\n        color.b = b;\\n        color.a = b;\\n        gl_FragColor = color;\\n    }\\n';\n\t\n\tvar FRAGMENT_MERGE = '\\n\\n    precision mediump float;\\n\\n    varying vec2 uv;\\n\\n    uniform sampler2D ball;\\n    uniform sampler2D previous;\\n\\n    void main() { \\n\\n        vec4 colorBall = texture2D(ball, uv);\\n        vec4 colorPrevious = texture2D(previous, uv);\\n\\n        gl_FragColor = vec4(0.0);\\n        gl_FragColor.a = colorBall.a + colorPrevious.a;\\n\\n        gl_FragColor.r = gl_FragColor.a;\\n        gl_FragColor.g = gl_FragColor.a*.4;\\n        gl_FragColor.b = gl_FragColor.a;\\n\\n    }\\n';\n\t\n\tfunction getFragmentPreviousFrame(trail) {\n\t    return '\\n\\n    precision mediump float;\\n\\n    varying vec2 uv;\\n\\n    uniform sampler2D previous;\\n\\n    const float trail = ' + trail + '; \\n    const float blur = 0.125;\\n    const float weight = .88;\\n    \\n    void main() { \\n        \\n        vec2 onePixel = vec2(1.0, 1.0) / vec2(512., 512.);\\n        vec4 color = texture2D(previous, uv + onePixel * vec2(-1, -1)) * blur +\\n        texture2D(previous, uv + onePixel * vec2( 0, -1)) * blur +\\n        texture2D(previous, uv + onePixel * vec2( 1, -1)) * blur +\\n        texture2D(previous, uv + onePixel * vec2(-1,  0)) * blur +\\n        texture2D(previous, uv + onePixel * vec2( 0,  0)) * blur +\\n        texture2D(previous, uv + onePixel * vec2( 1,  0)) * blur +\\n        texture2D(previous, uv + onePixel * vec2(-1,  1)) * blur +\\n        texture2D(previous, uv + onePixel * vec2( 0,  1)) * blur +\\n        texture2D(previous, uv + onePixel * vec2( 1,  1)) * blur ;\\n        color *= weight;\\n        \\n        gl_FragColor = color;\\n        gl_FragColor.a -= trail;\\n\\n        if ( gl_FragColor.a < 0.2 ) gl_FragColor = vec4(0.0);\\n        // if ( gl_FragColor.a < 0.101 && gl_FragColor.a > 0.1 ) gl_FragColor = vec4(0.101/ gl_FragColor.a, .101/ gl_FragColor.a, .101/ gl_FragColor.a, .101/ gl_FragColor.a);\\n        // if ( gl_FragColor.a < 0.101 && gl_FragColor.a > 0.1 ) gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\\n    }\\n';\n\t}\n\t\n\tvar VERTEX = '\\n    \\n    precision mediump float;\\n\\n    const vec2 mid=vec2(0.5,0.5);\\n    attribute vec2 vertexPosition;\\n    varying vec2 uv;\\n    \\n    void main() {\\n       uv = vertexPosition.xy * mid + mid; // scale vertex attribute to [0-1] range\\n       gl_Position = vec4(vertexPosition.xy,0.0,1.0);\\n    }\\n\\n';\n\t\n\tvar LayerSimpleBall = function (_Layer) {\n\t    _inherits(LayerSimpleBall, _Layer);\n\t\n\t    function LayerSimpleBall(gl, radius, trail) {\n\t        _classCallCheck(this, LayerSimpleBall);\n\t\n\t        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(LayerSimpleBall).call(this, gl));\n\t\n\t        _this.lifetime = 0;\n\t\n\t        _this.dot = new Float32Array([0.5, 0.5, radius, trail]); // x, y, radius, trail\n\t\n\t        /** Render pipeline *********************************\n\t          *     coordinates             >> BallRTT          *\n\t          *     PreviousRTT + BallRTT   >> MergeRTT         *\n\t          *     MergeRTT                >> previousRTT      *\n\t          *     MergeRTT                >> SCREEN           *\n\t          ***************************************************/\n\t\n\t        /** Buffers **/\n\t        _this.initTextureBuffers(gl);\n\t\n\t        /** Ball **/\n\t        _this.pointersBall = _this.initShaderBall(gl);\n\t\n\t        /** Merge **/\n\t        _this.pointersMerge = _this.initShaderMerge(gl);\n\t\n\t        /** Previous **/\n\t        _this.pointersPreviousFrame = _this.initShaderPreviousFrame(gl);\n\t\n\t        return _this;\n\t    }\n\t\n\t    _createClass(LayerSimpleBall, [{\n\t        key: 'initTextureBuffers',\n\t        value: function initTextureBuffers(gl) {\n\t\n\t            this.ballRTT = gl.createTexture();\n\t            gl.bindTexture(gl.TEXTURE_2D, this.ballRTT);\n\t            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n\t            gl.texImage2D(this.gl.TEXTURE_2D, 0, gl.RGBA, 512, 512, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\t            gl.generateMipmap(gl.TEXTURE_2D);\n\t            gl.bindTexture(gl.TEXTURE_2D, null);\n\t            this.ballFrameBuffer = gl.createFramebuffer();\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, this.ballFrameBuffer);\n\t            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.ballRTT, 0);\n\t            this.ballFrameBuffer.width = 512;\n\t            this.ballFrameBuffer.height = 512;\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\n\t            this.previousRTT = gl.createTexture();\n\t            gl.bindTexture(gl.TEXTURE_2D, this.previousRTT);\n\t            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n\t            gl.texImage2D(this.gl.TEXTURE_2D, 0, gl.RGBA, 512, 512, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\t            gl.generateMipmap(gl.TEXTURE_2D);\n\t            gl.bindTexture(gl.TEXTURE_2D, null);\n\t            this.previousFrameBuffer = gl.createFramebuffer();\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, this.previousFrameBuffer);\n\t            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.previousRTT, 0);\n\t            this.previousFrameBuffer.width = 512;\n\t            this.previousFrameBuffer.height = 512;\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\n\t            this.mergeRTT = gl.createTexture();\n\t            gl.bindTexture(gl.TEXTURE_2D, this.mergeRTT);\n\t            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n\t            gl.texImage2D(this.gl.TEXTURE_2D, 0, gl.RGBA, 512, 512, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\t            gl.generateMipmap(gl.TEXTURE_2D);\n\t            gl.bindTexture(gl.TEXTURE_2D, null);\n\t            this.mergeFrameBuffer = gl.createFramebuffer();\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, this.mergeFrameBuffer);\n\t            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.mergeRTT, 0);\n\t            this.mergeFrameBuffer.width = 512;\n\t            this.mergeFrameBuffer.height = 512;\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t        }\n\t    }, {\n\t        key: 'initShaderBall',\n\t        value: function initShaderBall(gl) {\n\t\n\t            // load and compile the fragment and vertex shader\n\t            var fragmentShader = _get(Object.getPrototypeOf(LayerSimpleBall.prototype), 'createShader', this).call(this, FRAGMENT_BALL, gl.FRAGMENT_SHADER);\n\t            var vertexShader = _get(Object.getPrototypeOf(LayerSimpleBall.prototype), 'createShader', this).call(this, VERTEX, gl.VERTEX_SHADER);\n\t\n\t            this.programBall = gl.createProgram();\n\t            gl.attachShader(this.programBall, vertexShader);\n\t            gl.attachShader(this.programBall, fragmentShader);\n\t            gl.linkProgram(this.programBall);\n\t\n\t            // get pointers to the shader params\n\t            var pointers = {\n\t                'vertexPosition': gl.getAttribLocation(this.programBall, 'vertexPosition'),\n\t                'dot': gl.getUniformLocation(this.programBall, 'dot')\n\t            };\n\t\n\t            gl.enableVertexAttribArray(pointers.vertexPosition);\n\t\n\t            this.validateProgram(this.programBall);\n\t\n\t            return pointers;\n\t        }\n\t    }, {\n\t        key: 'initShaderMerge',\n\t        value: function initShaderMerge(gl) {\n\t            // load and compile the fragment and vertex shader\n\t            var fragmentShader = _get(Object.getPrototypeOf(LayerSimpleBall.prototype), 'createShader', this).call(this, FRAGMENT_MERGE, gl.FRAGMENT_SHADER);\n\t            var vertexShader = _get(Object.getPrototypeOf(LayerSimpleBall.prototype), 'createShader', this).call(this, VERTEX, gl.VERTEX_SHADER);\n\t\n\t            this.programMerge = gl.createProgram();\n\t            gl.attachShader(this.programMerge, vertexShader);\n\t            gl.attachShader(this.programMerge, fragmentShader);\n\t            gl.linkProgram(this.programMerge);\n\t\n\t            // get pointers to the shader params\n\t            var pointers = {\n\t                'vertexPosition': gl.getAttribLocation(this.programMerge, 'vertexPosition'),\n\t                'ball': gl.getUniformLocation(this.programMerge, 'ball'),\n\t                'previous': gl.getUniformLocation(this.programMerge, 'previous')\n\t            };\n\t\n\t            gl.enableVertexAttribArray(pointers.vertexPosition);\n\t\n\t            this.validateProgram(this.programMerge);\n\t\n\t            return pointers;\n\t        }\n\t    }, {\n\t        key: 'initShaderPreviousFrame',\n\t        value: function initShaderPreviousFrame(gl) {\n\t\n\t            // load and compile the fragment and vertex shader\n\t            var fragmentShader = _get(Object.getPrototypeOf(LayerSimpleBall.prototype), 'createShader', this).call(this, getFragmentPreviousFrame(this.dot[3].toFixed(2)), gl.FRAGMENT_SHADER);\n\t            var vertexShader = _get(Object.getPrototypeOf(LayerSimpleBall.prototype), 'createShader', this).call(this, VERTEX, gl.VERTEX_SHADER);\n\t\n\t            this.programPreviousFrame = gl.createProgram();\n\t            gl.attachShader(this.programPreviousFrame, vertexShader);\n\t            gl.attachShader(this.programPreviousFrame, fragmentShader);\n\t            gl.linkProgram(this.programPreviousFrame);\n\t\n\t            // get pointers to the shader params\n\t            var pointers = {\n\t                'vertexPosition': gl.getAttribLocation(this.programPreviousFrame, 'vertexPosition'),\n\t                'previous': gl.getUniformLocation(this.programPreviousFrame, 'previous')\n\t            };\n\t\n\t            gl.enableVertexAttribArray(pointers.vertexPosition);\n\t\n\t            this.validateProgram(this.programPreviousFrame);\n\t\n\t            return pointers;\n\t        }\n\t    }, {\n\t        key: 'validateProgram',\n\t        value: function validateProgram(program) {\n\t            if (!this.gl.getProgramParameter(program, this.gl.LINK_STATUS)) {\n\t                console.error('[LayerBall] Could not initialize shaders');\n\t            }\n\t        }\n\t    }, {\n\t        key: 'render',\n\t        value: function render(elapsedTime) {\n\t\n\t            this.lifetime += elapsedTime;\n\t\n\t            var gl = this.gl;\n\t\n\t            gl.blendEquation(gl.FUNC_ADD);\n\t            gl.blendFunc(gl.ONE, gl.DST_ALPHA);\n\t\n\t            gl.bindBuffer(gl.ARRAY_BUFFER, this.geometry.buffer);\n\t\n\t            /*     coordinates             >> BallRTT          */\n\t            gl.useProgram(this.programBall);\n\t            gl.vertexAttribPointer(this.pointersBall.vertexPosition, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n\t            gl.uniform4fv(this.pointersBall.dot, this.dot);\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, this.ballFrameBuffer);\n\t            gl.clearColor(0.0, 0.0, 0.0, 0.0);\n\t            gl.clear(gl.COLOR_BUFFER_BIT);\n\t            gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\n\t            /*     PreviousRTT + BallRTT   >> MergeRTT         */\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, this.mergeFrameBuffer);\n\t\n\t            gl.useProgram(this.programMerge);\n\t            gl.vertexAttribPointer(this.pointersMerge.vertexPosition, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n\t            gl.uniform1i(this.pointersMerge.ball, 0); // texture unit 0\n\t            gl.uniform1i(this.pointersMerge.previous, 1); // texture unit 1\n\t            gl.activeTexture(gl.TEXTURE0);\n\t            gl.bindTexture(gl.TEXTURE_2D, this.ballRTT);\n\t            gl.activeTexture(gl.TEXTURE1);\n\t            gl.bindTexture(gl.TEXTURE_2D, this.previousRTT);\n\t            gl.clearColor(0.0, 0.0, 0.0, 0.0);\n\t            gl.clear(gl.COLOR_BUFFER_BIT);\n\t            gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\t\n\t            /*     MergeRTT                >> previousRTT      */\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, this.previousFrameBuffer);\n\t            gl.useProgram(this.programPreviousFrame);\n\t            gl.vertexAttribPointer(this.pointersPreviousFrame.vertexPosition, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n\t            gl.uniform1i(this.pointersPreviousFrame.previous, 0);\n\t            gl.activeTexture(gl.TEXTURE0);\n\t            gl.bindTexture(gl.TEXTURE_2D, this.mergeRTT);\n\t            gl.clearColor(0.0, 0.0, 0.0, 0.0);\n\t            gl.clear(gl.COLOR_BUFFER_BIT);\n\t            gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\t\n\t            gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n\t\n\t            /*     MergeRTT                >> SCREEN           */\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t            gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\t        }\n\t    }, {\n\t        key: 'x',\n\t        set: function set(x) {\n\t            this.dot[0] = x;\n\t        }\n\t    }, {\n\t        key: 'y',\n\t        set: function set(y) {\n\t            this.dot[1] = y;\n\t        }\n\t    }, {\n\t        key: 'radius',\n\t        set: function set(radius) {\n\t            this.dot[2] = radius;\n\t        }\n\t    }, {\n\t        key: 'trail',\n\t        set: function set(trail) {\n\t            this.dot[3] = trail;\n\t        }\n\t    }]);\n\t\n\t    return LayerSimpleBall;\n\t}(_Layer3.default);\n\t\n\texports.default = LayerSimpleBall;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _Layer2 = __webpack_require__(2);\n\t\n\tvar _Layer3 = _interopRequireDefault(_Layer2);\n\t\n\tvar _Stage = __webpack_require__(1);\n\t\n\tvar _Stage2 = _interopRequireDefault(_Stage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar FRAGMENT = '\\n\\n    precision mediump float;\\n\\n    varying vec2 uv;\\n    \\n    uniform sampler2D image;\\n\\n    void main() { \\n        gl_FragColor = texture2D(image, uv);\\n    }\\n';\n\t\n\tvar VERTEX = '\\n    \\n    precision mediump float;\\n\\n    const vec2 mid=vec2(0.5,0.5);\\n    attribute vec2 vertexPosition;\\n    varying vec2 uv;\\n    \\n    void main() {\\n       uv = vertexPosition.xy * mid + mid; // scale vertex attribute to [0-1] range\\n       gl_Position = vec4(vertexPosition.xy,0.0,1.0);\\n    }\\n    \\n';\n\t\n\tvar LayerImage = function (_Layer) {\n\t    _inherits(LayerImage, _Layer);\n\t\n\t    function LayerImage(gl, img) {\n\t        _classCallCheck(this, LayerImage);\n\t\n\t        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(LayerImage).call(this, gl));\n\t\n\t        _this.texture = gl.createTexture();\n\t        _this.img = img;\n\t        _this.ready = true;\n\t        gl.bindTexture(gl.TEXTURE_2D, _this.texture);\n\t        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n\t        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n\t        gl.generateMipmap(gl.TEXTURE_2D);\n\t        gl.bindTexture(gl.TEXTURE_2D, null);\n\t\n\t        _this.program = _this.initShader(gl);\n\t\n\t        _this.lifetime = 0;\n\t\n\t        _this.dot = new Float32Array([0.5, 0.5, 30.0, .5]); // x, y, radius, trail\n\t        return _this;\n\t    }\n\t\n\t    _createClass(LayerImage, [{\n\t        key: 'initShader',\n\t        value: function initShader(gl) {\n\t\n\t            // load and compile the fragment and vertex shader\n\t            var fragmentShader = _get(Object.getPrototypeOf(LayerImage.prototype), 'createShader', this).call(this, FRAGMENT, gl.FRAGMENT_SHADER);\n\t            var vertexShader = _get(Object.getPrototypeOf(LayerImage.prototype), 'createShader', this).call(this, VERTEX, gl.VERTEX_SHADER);\n\t\n\t            // link them together into a new program\n\t            this.program = gl.createProgram();\n\t            gl.attachShader(this.program, vertexShader);\n\t            gl.attachShader(this.program, fragmentShader);\n\t            gl.linkProgram(this.program);\n\t\n\t            // get pointers to the shader params\n\t            this.shaderVertexPositionAttribute = gl.getAttribLocation(this.program, 'vertexPosition');\n\t            gl.enableVertexAttribArray(this.shaderVertexPositionAttribute);\n\t\n\t            if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n\t                console.error('[LayerBall] Could not initialize shaders');\n\t            }\n\t\n\t            return this.program;\n\t        }\n\t    }, {\n\t        key: 'render',\n\t        value: function render(elapsedTime) {\n\t\n\t            var gl = this.gl;\n\t\n\t            // set the vertex buffer to be drawn\n\t            gl.bindBuffer(gl.ARRAY_BUFFER, this.geometry.buffer);\n\t\n\t            // set the shader\n\t            gl.useProgram(this.program);\n\t\n\t            // bind comon attributes and uniforms\n\t            gl.vertexAttribPointer(this.shaderVertexPositionAttribute, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n\t\n\t            gl.activeTexture(gl.TEXTURE0);\n\t            gl.bindTexture(gl.TEXTURE_2D, this.texture);\n\t            gl.uniform1i(this.program.samplerUniform, 0);\n\t\n\t            // draw\n\t            gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\t        }\n\t    }]);\n\t\n\t    return LayerImage;\n\t}(_Layer3.default);\n\t\n\texports.default = LayerImage;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _Layer2 = __webpack_require__(2);\n\t\n\tvar _Layer3 = _interopRequireDefault(_Layer2);\n\t\n\tvar _Stage = __webpack_require__(1);\n\t\n\tvar _Stage2 = _interopRequireDefault(_Stage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar FRAGMENT = '\\n\\n    precision mediump float;\\n\\n    varying vec2 uv;\\n\\n    uniform vec4 dot;\\n    \\n    void main() {\\n        vec4 color = vec4(0.0);\\n        float radius = dot.z; // get the radius from dot[2]\\n        vec2 pixelRatio = vec2(1.0, 1.0) / vec2(512.0, 512.0) * radius;\\n        float b = ( 1.0 - length( ( dot.xy - uv ) / pixelRatio ) );\\n        if ( b < .1 ) b = .0; \\n        color.r = b;\\n        color.g = b;\\n        color.b = 0.0;\\n        color.a = b;\\n        gl_FragColor = color;\\n    }\\n';\n\t\n\tvar VERTEX = '\\n    \\n    precision mediump float;\\n\\n    const vec2 mid=vec2(0.5,0.5);\\n    attribute vec2 vertexPosition;\\n    varying vec2 uv;\\n    \\n    void main() {\\n       uv = vertexPosition.xy * mid + mid; // scale vertex attribute to [0-1] range\\n       gl_Position = vec4(vertexPosition.xy,0.0,1.0);\\n    }\\n    \\n';\n\t\n\tvar LayerSimpleBall = function (_Layer) {\n\t    _inherits(LayerSimpleBall, _Layer);\n\t\n\t    function LayerSimpleBall(gl) {\n\t        _classCallCheck(this, LayerSimpleBall);\n\t\n\t        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(LayerSimpleBall).call(this, gl));\n\t\n\t        _this.program = _this.initShader(gl);\n\t\n\t        _this.lifetime = 0;\n\t\n\t        _this.dot = new Float32Array([0.5, 0.5, 30.0, .5]); // x, y, radius, trail\n\t        return _this;\n\t    }\n\t\n\t    _createClass(LayerSimpleBall, [{\n\t        key: 'initShader',\n\t        value: function initShader(gl) {\n\t\n\t            // load and compile the fragment and vertex shader\n\t            var fragmentShader = _get(Object.getPrototypeOf(LayerSimpleBall.prototype), 'createShader', this).call(this, FRAGMENT, gl.FRAGMENT_SHADER);\n\t            var vertexShader = _get(Object.getPrototypeOf(LayerSimpleBall.prototype), 'createShader', this).call(this, VERTEX, gl.VERTEX_SHADER);\n\t\n\t            // link them together into a new program\n\t            this.program = gl.createProgram();\n\t            gl.attachShader(this.program, vertexShader);\n\t            gl.attachShader(this.program, fragmentShader);\n\t            gl.linkProgram(this.program);\n\t\n\t            // get pointers to the shader params\n\t            this.shaderVertexPositionAttribute = gl.getAttribLocation(this.program, 'vertexPosition');\n\t            gl.enableVertexAttribArray(this.shaderVertexPositionAttribute);\n\t\n\t            if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n\t                console.error('[LayerBall] Could not initialize shaders');\n\t            }\n\t\n\t            return this.program;\n\t        }\n\t    }, {\n\t        key: 'render',\n\t        value: function render(elapsedTime) {\n\t\n\t            this.lifetime += elapsedTime;\n\t\n\t            var gl = this.gl;\n\t\n\t            // set the vertex buffer to be drawn\n\t            gl.bindBuffer(gl.ARRAY_BUFFER, this.geometry.buffer);\n\t\n\t            // set the shader\n\t            gl.useProgram(this.program);\n\t\n\t            // bind comon attributes and uniforms\n\t            gl.vertexAttribPointer(this.shaderVertexPositionAttribute, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n\t\n\t            // bind updated ball properties\n\t            gl.uniform4fv(gl.getUniformLocation(this.program, \"dot\"), this.dot);\n\t\n\t            // draw\n\t            gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\t        }\n\t    }, {\n\t        key: 'x',\n\t        set: function set(x) {\n\t            this.dot[0] = x;\n\t        }\n\t    }, {\n\t        key: 'y',\n\t        set: function set(y) {\n\t            this.dot[1] = y;\n\t        }\n\t    }, {\n\t        key: 'radius',\n\t        set: function set(radius) {\n\t            this.dot[2] = radius;\n\t        }\n\t    }, {\n\t        key: 'trail',\n\t        set: function set(trail) {\n\t            this.dot[3] = trail;\n\t        }\n\t    }]);\n\t\n\t    return LayerSimpleBall;\n\t}(_Layer3.default);\n\t\n\texports.default = LayerSimpleBall;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Clock = function () {\n\t    function Clock() {\n\t        _classCallCheck(this, Clock);\n\t\n\t        this.timeBefore = Date.now();\n\t        this.lifeTime = 0;\n\t        this.elapsedTime = 0;\n\t    }\n\t\n\t    _createClass(Clock, [{\n\t        key: \"tick\",\n\t        value: function tick() {\n\t            this.elapsedTime = Date.now() - this.timeBefore;\n\t            this.timeBefore = Date.now();\n\t            this.lifeTime += this.elapsedTime;\n\t            return this.elapsedTime / 1000;\n\t        }\n\t    }]);\n\t\n\t    return Clock;\n\t}();\n\t\n\texports.default = Clock;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(module) {'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author mr.doob / http://mrdoob.com/\n\t */\n\t\n\tvar Detector = {\n\t\n\t\tcanvas: !!window.CanvasRenderingContext2D,\n\t\twebgl: function () {\n\t\n\t\t\ttry {\n\t\n\t\t\t\tvar canvas = document.createElement('canvas');return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\n\t\t\t} catch (e) {\n\t\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}(),\n\t\tworkers: !!window.Worker,\n\t\tfileapi: window.File && window.FileReader && window.FileList && window.Blob,\n\t\n\t\tgetWebGLErrorMessage: function getWebGLErrorMessage() {\n\t\n\t\t\tvar element = document.createElement('div');\n\t\t\telement.id = 'webgl-error-message';\n\t\t\telement.style.fontFamily = 'monospace';\n\t\t\telement.style.fontSize = '13px';\n\t\t\telement.style.fontWeight = 'normal';\n\t\t\telement.style.textAlign = 'center';\n\t\t\telement.style.background = '#fff';\n\t\t\telement.style.color = '#000';\n\t\t\telement.style.padding = '1.5em';\n\t\t\telement.style.width = '400px';\n\t\t\telement.style.margin = '5em auto 0';\n\t\n\t\t\tif (!this.webgl) {\n\t\n\t\t\t\telement.innerHTML = window.WebGLRenderingContext ? ['Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />', 'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'].join('\\n') : ['Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>', 'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'].join('\\n');\n\t\t\t}\n\t\n\t\t\treturn element;\n\t\t},\n\t\n\t\taddGetWebGLMessage: function addGetWebGLMessage(parameters) {\n\t\n\t\t\tvar parent, id, element;\n\t\n\t\t\tparameters = parameters || {};\n\t\n\t\t\tparent = parameters.parent !== undefined ? parameters.parent : document.body;\n\t\t\tid = parameters.id !== undefined ? parameters.id : 'oldie';\n\t\n\t\t\telement = Detector.getWebGLErrorMessage();\n\t\t\telement.id = id;\n\t\n\t\t\tparent.appendChild(element);\n\t\t}\n\t\n\t};\n\t\n\t// browserify support\n\tif (( false ? 'undefined' : _typeof(module)) === 'object') {\n\t\n\t\tmodule.exports = Detector;\n\t}\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)(module)))\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(module) {\"use strict\";\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\t// stats.js - http://github.com/mrdoob/stats.js\n\tvar Stats = function Stats() {\n\t  function f(a, e, b) {\n\t    a = document.createElement(a);a.id = e;a.style.cssText = b;return a;\n\t  }function l(a, e, b) {\n\t    var c = f(\"div\", a, \"padding:0 0 3px 3px;text-align:left;background:\" + b),\n\t        d = f(\"div\", a + \"Text\", \"font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:\" + e);d.innerHTML = a.toUpperCase();c.appendChild(d);a = f(\"div\", a + \"Graph\", \"width:74px;height:30px;background:\" + e);c.appendChild(a);for (e = 0; 74 > e; e++) {\n\t      a.appendChild(f(\"span\", \"\", \"width:1px;height:30px;float:left;opacity:0.9;background:\" + b));\n\t    }return c;\n\t  }function m(a) {\n\t    for (var b = c.children, d = 0; d < b.length; d++) {\n\t      b[d].style.display = d === a ? \"block\" : \"none\";\n\t    }n = a;\n\t  }function p(a, b) {\n\t    a.appendChild(a.firstChild).style.height = Math.min(30, 30 - 30 * b) + \"px\";\n\t  }var q = self.performance && self.performance.now ? self.performance.now.bind(performance) : Date.now,\n\t      k = q(),\n\t      r = k,\n\t      t = 0,\n\t      n = 0,\n\t      c = f(\"div\", \"stats\", \"width:80px;opacity:0.9;cursor:pointer\");c.addEventListener(\"mousedown\", function (a) {\n\t    a.preventDefault();m(++n % c.children.length);\n\t  }, !1);var d = 0,\n\t      u = Infinity,\n\t      v = 0,\n\t      b = l(\"fps\", \"#0ff\", \"#002\"),\n\t      A = b.children[0],\n\t      B = b.children[1];c.appendChild(b);var g = 0,\n\t      w = Infinity,\n\t      x = 0,\n\t      b = l(\"ms\", \"#0f0\", \"#020\"),\n\t      C = b.children[0],\n\t      D = b.children[1];c.appendChild(b);if (self.performance && self.performance.memory) {\n\t    var h = 0,\n\t        y = Infinity,\n\t        z = 0,\n\t        b = l(\"mb\", \"#f08\", \"#201\"),\n\t        E = b.children[0],\n\t        F = b.children[1];c.appendChild(b);\n\t  }m(n);return { REVISION: 14, domElement: c, setMode: m, begin: function begin() {\n\t      k = q();\n\t    }, end: function end() {\n\t      var a = q();g = a - k;w = Math.min(w, g);x = Math.max(x, g);C.textContent = (g | 0) + \" MS (\" + (w | 0) + \"-\" + (x | 0) + \")\";p(D, g / 200);t++;if (a > r + 1E3 && (d = Math.round(1E3 * t / (a - r)), u = Math.min(u, d), v = Math.max(v, d), A.textContent = d + \" FPS (\" + u + \"-\" + v + \")\", p(B, d / 100), r = a, t = 0, void 0 !== h)) {\n\t        var b = performance.memory.usedJSHeapSize,\n\t            c = performance.memory.jsHeapSizeLimit;h = Math.round(9.54E-7 * b);y = Math.min(y, h);z = Math.max(z, h);E.textContent = h + \" MB (\" + y + \"-\" + z + \")\";p(F, b / c);\n\t      }return a;\n\t    }, update: function update() {\n\t      k = this.end();\n\t    } };\n\t};\"object\" === ( false ? \"undefined\" : _typeof(module)) && (module.exports = Stats);\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)(module)))\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** bundle.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a93629f0ca54739f714c\n **/","\"use strict\";\n\nimport Renderer      from './Renderer';\nimport Clock         from '../utils/Clock';\n\nconst singletonEnforcer = Symbol();\nlet instance = Symbol();\n\nexport default class Stage {\n\n    static initialize ( canvas, options ) {\n        \n        if (this[instance]) {\n            throw '[Stage] Already initialized.';\n        }\n\n        this[instance] = new Stage(singletonEnforcer, canvas, options);\n        return this[instance];\n\n    }\n    \n    static getInstance () {\n\n        if (!this[instance]) {\n           throw '[Stage] Must first call `Stage.initialize(canvas, options)`.';\n        }\n        return this[instance];\n\n    }\n\n    static getRenderer () {\n        return Stage.getInstance().renderer;\n    }\n\n    static getGL () {\n        return Stage.getInstance().renderer.gl;\n    }\n\n    static addLayer ( layer ) { \n        Stage.getInstance().addLayer( layer ); \n    }\n\n    static removeLayer ( layer ) { \n        Stage.getInstance().removeLayer( layer ); \n    }\n    \n    static setLayerIndex ( layer, index ) {\n        Stage.getInstance().setLayerIndex( layer, index );         \n    }\n\n    static beforeUpdateHandler ( callback ) {\n        Stage.getInstance().beforeUpdateHandler = callback;   \n    }\n\n    static afterUpdateHandler ( callback ) {\n        Stage.getInstance().afterUpdateHandler = callback;   \n    }\n\n    constructor (enforcer, canvas, options) {\n\n        if (enforcer !== singletonEnforcer) {\n            throw '[Stage] Singleton class, use `Stage.getInstance()` instead.';\n        }\n\n        this.clock = new Clock();\n\n        this.layers = [];\n\n        this.renderer = new Renderer( canvas, options );\n\n        this.update();\n\n        console.log('[Stage] initialized.');\n\n    }\n    \n    update() {    \n        \n        window.requestAnimationFrame( this.update.bind(this) );\n\n        let elapsedTime = this.clock.tick();\n\n        if ( this.beforeUpdateHandler ) this.beforeUpdateHandler( elapsedTime );\n\n        this.renderer.clear();\n\n        for ( let layer of this.layers ) layer.render(elapsedTime);\n\n        if ( this.afterUpdateHandler ) this.afterUpdateHandler( elapsedTime );\n    }\n\n    addLayer ( layer ) {\n        this.layers.push( layer );\n    }\n\n    removeLayer ( layer ) { \n        console.log('[Stage] TO DO: implement removeLayer.');\n    }\n\n    setLayerIndex ( layer, index ) { \n        console.log('[Stage] TO DO: implement setLayerIndex.');\n    }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/Stage.js\n **/","\"use strict\";\n\n\nconst DEFAULT_FRAGMENT = `\n    void main(void) {\n        gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0); // default debug purple\n    }\n`;\n\nconst DEFAULT_VERTEX = `\n    attribute vec3 vertexPos;\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n    void main(void) {\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPos, 1.0);\n    }\n`;\n\n\nexport default class Layer {\n    constructor(gl) {\n        \n        this.gl = gl;\n\n        this.geometry = this.getDefaultGeometry( gl );\n\n        if (this.render === undefined) \n            throw new TypeError(\"Must override method 'render'.\");\n\n        console.log('[Layer] initialized.');\n\n    }\n\n    getDefaultGeometry (gl) {\n\n        var vertexBuffer;\n        vertexBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n        var verts = [\n             1.0,  1.0,  0.0,\n            -1.0,  1.0,  0.0,\n             1.0, -1.0,  0.0,\n            -1.0, -1.0,  0.0\n        ];\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verts), gl.STATIC_DRAW);\n        var square = {buffer:vertexBuffer, vertSize:3, nVerts:4, primtype:gl.TRIANGLE_STRIP};\n        return square;\n    }\n\n    getDefaultFragment () { \n        return DEFAULT_FRAGMENT; \n    }\n    \n    getDefaultVertex () { \n        return DEFAULT_VERTEX; \n    }\n    \n    createShader (str, type) {\n        let shader = this.gl.createShader(type);\n        this.gl.shaderSource(shader, str);\n        this.gl.compileShader(shader);\n        if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\n            console.error( '[Layer] ', this.gl.getShaderInfoLog(shader));\n            return null;\n        }\n        return shader;\n    }\n\n    update ( elapsedTime ) {\n        console.warn('Implement update() method for', this);\n    }\n    \n    render (  ) {\n        console.warn('Implement render() method for', this);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/layers/Layer.js\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 3\n ** module chunks = 0\n **/","\"use strict\";\n\nimport Stage            from './core/Stage';\nimport LayerSimpleBall  from './layers/LayerSimpleBall';\nimport LayerBallTrail   from './layers/LayerBallTrail';\nimport LayerImage       from './layers/LayerImage';\nimport Stats            from './vendors/Stats.min';\n\nexport default class Game {\n\n    constructor(options) {\n        let image = new Image();\n        image.onload = () => this.init( image ); \n        image.src = 'assets/img/field.png';\n\n    }\n\n    init (bgImg) {\n\n        Stage.initialize(document.getElementById('canvas'), {\n            contain: true\n        });\n\n        this.bg = new LayerImage( Stage.getGL(), bgImg );\n        Stage.addLayer( this.bg );\n\n        this.ball = new LayerSimpleBall( Stage.getGL() );\n        this.ball.radius = 25.0;\n        Stage.addLayer( this.ball );\n\n        this.balls = [];\n        for ( var i=0,l=1; i<l; i++ ) {\n            let ball = new LayerBallTrail( Stage.getGL(), 20, .01 );\n            ball.speedX = 2;\n            ball.speedY = 3;\n            Stage.addLayer( ball );\n            this.balls.push( ball );\n        }\n        \n        Stage.beforeUpdateHandler( this.update.bind(this) );\n        Stage.afterUpdateHandler( null );\n\n        this.lifetime = 0;\n\n        this.stats = new Stats();\n        \n        let container = document.getElementById( 'container' );\n        container.appendChild( this.stats.domElement );\n        \n        document.addEventListener( 'mousedown', this.onDocumentMouseDown.bind(this), false );\n\n    }\n\n    onDocumentMouseDown( event ) {\n\n        event.preventDefault();\n\n    }\n\n    update( elapsedTime ) {\n    \n        this.lifetime += elapsedTime;\n\n        this.ball.x = (Math.sin(this.lifetime*3)+1)/2*.8+.1;\n        this.ball.y = (Math.sin(this.lifetime*2.6)+1)/2*.8+.1;\n\n        for ( let ball of this.balls ) {\n            ball.x = (Math.sin(this.lifetime*ball.speedX)+1)/2*.8+.1;\n            ball.y = (Math.sin(this.lifetime*ball.speedY)+1)/2*.8+.1;\n        }\n\n        this.stats.update();\n\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/Game.js\n **/","'use strict';\n\nimport '../sass/main.scss';\n\nimport Detector from './vendors/Detector';\n\nimport Game from './Game';\n\nif ( ! Detector.webgl ) Detector.addGetWebGLMessage();\n\nwindow.addEventListener('load', function () {\n    let game = new Game({});\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/Main.js\n **/","\"use strict\";\n\nexport default class Renderer {\n\n    constructor ( canvas, options ) {\n\n        this.canvas = canvas;\n\n        options = options || {};\n        this.contain = options.hasOwnProperty('contain') ? options.contain : true;\n\n        this.gl = this.initWebGL( canvas );\n        this.initViewport( this.gl, canvas );\n\n        window.addEventListener( 'resize', this.onWindowResize.bind(this), false );\n        this.onWindowResize();\n        \n        console.log('[Renderer] initialized.');\n\n    }\n\n    initWebGL (canvas) {\n        let gl;\n        try {\n            gl = this.canvas.getContext('webgl', {\n                alpha: true,\n                // depth: true,\n                // stencil:true,\n                antialias: true,\n                // premultipliedAlpha: true,\n                preserveDrawingBuffer: true ,\n                // failIfMajorPerformanceCaveat: true \n            });\n        } catch (e) {\n            var msg = \"Error creating WebGL Context!: \" + e.toString();\n            alert(msg);\n            throw Error(msg);\n        }\n        return gl;        \n    }\n\n    initViewport (gl, canvas) {\n        gl.viewport(0, 0, canvas.width, canvas.height);\n    }\n\n    clear () {\n\n        this.gl.bindTexture( this.gl.TEXTURE_2D, null );\n        this.gl.bindRenderbuffer( this.gl.RENDERBUFFER, null );\n        this.gl.bindFramebuffer( this.gl.FRAMEBUFFER, null );\n\n        this.gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n\n        this.gl.enable(this.gl.BLEND);\n        this.gl.disable(this.gl.DEPTH_TEST);\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE);\n\n    }\n\n    onWindowResize() {\n\n        let scale = 1/(this.contain?Math.max:Math.min)( this.canvas.width/window.innerWidth, this.canvas.height/window.innerHeight );\n        canvas.style.transformOrigin = 'top left';\n        canvas.style.left = ( ( window.innerWidth - this.canvas.width*scale) / 2 ).toFixed(2) + 'px';\n        canvas.style.top = ( ( window.innerHeight - this.canvas.height*scale) / 2 ).toFixed(2) + 'px';\n        canvas.style.transform = 'scale('+scale.toFixed(2)+')';\n\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/Renderer.js\n **/","\"use strict\";\n\nimport Layer from './Layer';\nimport Stage from './../core/Stage';\n\nconst FRAGMENT_BALL = `\n\n    precision mediump float;\n\n    varying vec2 uv;\n\n    uniform vec4 dot;\n    \n    void main() {\n        vec4 color = vec4(0.0);\n        float radius = 1.0 / 512.0 * dot.z;\n        float b = ( 1.0 - length( ( dot.xy - uv ) / radius ) );\n        color.r = b;\n        color.g = b*.4;\n        color.b = b;\n        color.a = b;\n        gl_FragColor = color;\n    }\n`;\n\nconst FRAGMENT_MERGE = `\n\n    precision mediump float;\n\n    varying vec2 uv;\n\n    uniform sampler2D ball;\n    uniform sampler2D previous;\n\n    void main() { \n\n        vec4 colorBall = texture2D(ball, uv);\n        vec4 colorPrevious = texture2D(previous, uv);\n\n        gl_FragColor = vec4(0.0);\n        gl_FragColor.a = colorBall.a + colorPrevious.a;\n\n        gl_FragColor.r = gl_FragColor.a;\n        gl_FragColor.g = gl_FragColor.a*.4;\n        gl_FragColor.b = gl_FragColor.a;\n\n    }\n`;\n\nfunction getFragmentPreviousFrame (trail) {\n    return `\n\n    precision mediump float;\n\n    varying vec2 uv;\n\n    uniform sampler2D previous;\n\n    const float trail = ${trail}; \n    const float blur = 0.125;\n    const float weight = .88;\n    \n    void main() { \n        \n        vec2 onePixel = vec2(1.0, 1.0) / vec2(512., 512.);\n        vec4 color = texture2D(previous, uv + onePixel * vec2(-1, -1)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 0, -1)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 1, -1)) * blur +\n        texture2D(previous, uv + onePixel * vec2(-1,  0)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 0,  0)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 1,  0)) * blur +\n        texture2D(previous, uv + onePixel * vec2(-1,  1)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 0,  1)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 1,  1)) * blur ;\n        color *= weight;\n        \n        gl_FragColor = color;\n        gl_FragColor.a -= trail;\n\n        if ( gl_FragColor.a < 0.2 ) gl_FragColor = vec4(0.0);\n        // if ( gl_FragColor.a < 0.101 && gl_FragColor.a > 0.1 ) gl_FragColor = vec4(0.101/ gl_FragColor.a, .101/ gl_FragColor.a, .101/ gl_FragColor.a, .101/ gl_FragColor.a);\n        // if ( gl_FragColor.a < 0.101 && gl_FragColor.a > 0.1 ) gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n    }\n`;\n}\n\nconst VERTEX = `\n    \n    precision mediump float;\n\n    const vec2 mid=vec2(0.5,0.5);\n    attribute vec2 vertexPosition;\n    varying vec2 uv;\n    \n    void main() {\n       uv = vertexPosition.xy * mid + mid; // scale vertex attribute to [0-1] range\n       gl_Position = vec4(vertexPosition.xy,0.0,1.0);\n    }\n\n`;\n\nexport default class LayerSimpleBall extends Layer {\n\n    constructor (gl, radius, trail) {\n        \n        super(gl);\n\n        this.lifetime = 0;\n\n        this.dot = new Float32Array([0.5, 0.5, radius, trail]); // x, y, radius, trail\n\n        /** Render pipeline *********************************\n          *     coordinates             >> BallRTT          *\n          *     PreviousRTT + BallRTT   >> MergeRTT         *\n          *     MergeRTT                >> previousRTT      *\n          *     MergeRTT                >> SCREEN           *\n          ***************************************************/\n\n        /** Buffers **/\n        this.initTextureBuffers( gl );\n\n        /** Ball **/\n        this.pointersBall = this.initShaderBall( gl );        \n\n        /** Merge **/\n        this.pointersMerge = this.initShaderMerge( gl );       \n        \n        /** Previous **/\n        this.pointersPreviousFrame = this.initShaderPreviousFrame( gl );       \n        \n    }\n\n    initTextureBuffers (gl) {\n\n        this.ballRTT = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, this.ballRTT);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n        gl.texImage2D(this.gl.TEXTURE_2D, 0, gl.RGBA, 512, 512, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.generateMipmap(gl.TEXTURE_2D);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        this.ballFrameBuffer = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.ballFrameBuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.ballRTT, 0);\n        this.ballFrameBuffer.width = 512;\n        this.ballFrameBuffer.height = 512;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n\n        this.previousRTT = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, this.previousRTT);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n        gl.texImage2D(this.gl.TEXTURE_2D, 0, gl.RGBA, 512, 512, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.generateMipmap(gl.TEXTURE_2D);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        this.previousFrameBuffer = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.previousFrameBuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.previousRTT, 0);\n        this.previousFrameBuffer.width = 512;\n        this.previousFrameBuffer.height = 512;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n\n\n        this.mergeRTT = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, this.mergeRTT);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n        gl.texImage2D(this.gl.TEXTURE_2D, 0, gl.RGBA, 512, 512, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.generateMipmap(gl.TEXTURE_2D);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        this.mergeFrameBuffer = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.mergeFrameBuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.mergeRTT, 0);\n        this.mergeFrameBuffer.width = 512;\n        this.mergeFrameBuffer.height = 512;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    }\n\n    initShaderBall (gl) {\n\n        // load and compile the fragment and vertex shader\n        let fragmentShader = super.createShader( FRAGMENT_BALL, gl.FRAGMENT_SHADER);\n        let vertexShader = super.createShader( VERTEX, gl.VERTEX_SHADER);\n\n        this.programBall = gl.createProgram();\n        gl.attachShader(this.programBall, vertexShader);\n        gl.attachShader(this.programBall, fragmentShader);\n        gl.linkProgram(this.programBall);\n\n        // get pointers to the shader params\n        let pointers = {\n            'vertexPosition': gl.getAttribLocation(this.programBall, 'vertexPosition'),\n            'dot': gl.getUniformLocation(this.programBall, 'dot'),\n        };\n\n        gl.enableVertexAttribArray(pointers.vertexPosition);\n        \n        this.validateProgram( this.programBall );\n\n        return pointers;\n    }\n\n    initShaderMerge (gl) {\n        // load and compile the fragment and vertex shader\n        let fragmentShader = super.createShader( FRAGMENT_MERGE, gl.FRAGMENT_SHADER);\n        let vertexShader = super.createShader( VERTEX, gl.VERTEX_SHADER);\n\n        this.programMerge = gl.createProgram();\n        gl.attachShader(this.programMerge, vertexShader);\n        gl.attachShader(this.programMerge, fragmentShader);\n        gl.linkProgram(this.programMerge);\n\n        // get pointers to the shader params\n        let pointers = {\n            'vertexPosition': gl.getAttribLocation(this.programMerge, 'vertexPosition'),\n            'ball': gl.getUniformLocation(this.programMerge, 'ball'),\n            'previous': gl.getUniformLocation(this.programMerge, 'previous')\n        };\n\n        gl.enableVertexAttribArray(pointers.vertexPosition);\n           \n        this.validateProgram( this.programMerge );\n\n        return pointers;\n    }\n        \n    initShaderPreviousFrame (gl) {\n\n        // load and compile the fragment and vertex shader\n        let fragmentShader = super.createShader( getFragmentPreviousFrame(this.dot[3].toFixed(2)), gl.FRAGMENT_SHADER);\n        let vertexShader = super.createShader( VERTEX, gl.VERTEX_SHADER);\n\n        this.programPreviousFrame = gl.createProgram();\n        gl.attachShader(this.programPreviousFrame, vertexShader);\n        gl.attachShader(this.programPreviousFrame, fragmentShader);\n        gl.linkProgram(this.programPreviousFrame);\n\n\n        // get pointers to the shader params\n        let pointers = {\n            'vertexPosition': gl.getAttribLocation(this.programPreviousFrame, 'vertexPosition'),\n            'previous': gl.getUniformLocation(this.programPreviousFrame, 'previous')\n        };\n\n        gl.enableVertexAttribArray(pointers.vertexPosition);\n           \n        this.validateProgram( this.programPreviousFrame );\n\n        return pointers;\n    }\n\n    validateProgram ( program ) {\n        if (!this.gl.getProgramParameter(program, this.gl.LINK_STATUS)) {\n            console.error( '[LayerBall] Could not initialize shaders' );\n        }\n    }\n    \n    render ( elapsedTime ) {\n   \n        this.lifetime += elapsedTime;\n   \n        let gl = this.gl;\n\n        gl.blendEquation( gl.FUNC_ADD );\n        gl.blendFunc(gl.ONE, gl.DST_ALPHA);\n\n        gl.bindBuffer( gl.ARRAY_BUFFER, this.geometry.buffer );\n\n        /*     coordinates             >> BallRTT          */\n        gl.useProgram( this.programBall );\n        gl.vertexAttribPointer( this.pointersBall.vertexPosition, this.geometry.vertSize, gl.FLOAT, false, 0, 0 );\n        gl.uniform4fv( this.pointersBall.dot, this.dot );  \n        gl.bindFramebuffer( gl.FRAMEBUFFER, this.ballFrameBuffer );\n        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        gl.drawArrays( this.geometry.primtype, 0, this.geometry.nVerts );\n        gl.bindFramebuffer( gl.FRAMEBUFFER, null );\n\n        /*     PreviousRTT + BallRTT   >> MergeRTT         */\n        gl.bindFramebuffer(gl.FRAMEBUFFER,  this.mergeFrameBuffer );\n        \n        gl.useProgram(this.programMerge);\n        gl.vertexAttribPointer(this.pointersMerge.vertexPosition, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n        gl.uniform1i(this.pointersMerge.ball, 0);  // texture unit 0\n        gl.uniform1i(this.pointersMerge.previous, 1);  // texture unit 1\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.ballRTT);\n        gl.activeTexture(gl.TEXTURE1);\n        gl.bindTexture(gl.TEXTURE_2D, this.previousRTT);\n        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n \n        /*     MergeRTT                >> previousRTT      */\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.previousFrameBuffer);        \n        gl.useProgram(this.programPreviousFrame);\n        gl.vertexAttribPointer(this.pointersPreviousFrame.vertexPosition, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n        gl.uniform1i(this.pointersPreviousFrame.previous, 0);\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.mergeRTT);\n        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        gl.drawArrays( this.geometry.primtype, 0, this.geometry.nVerts );\n\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n\n        /*     MergeRTT                >> SCREEN           */\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\n    }\n\n    set x(x) { this.dot[0] = x; }\n    set y(y) { this.dot[1] = y; }\n    set radius(radius) { this.dot[2] = radius; }\n    set trail(trail) { this.dot[3] = trail; }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/layers/LayerBallTrail.js\n **/","\"use strict\";\n\nimport Layer from './Layer';\nimport Stage from './../core/Stage';\n\nconst FRAGMENT = `\n\n    precision mediump float;\n\n    varying vec2 uv;\n    \n    uniform sampler2D image;\n\n    void main() { \n        gl_FragColor = texture2D(image, uv);\n    }\n`;\n\nconst VERTEX = `\n    \n    precision mediump float;\n\n    const vec2 mid=vec2(0.5,0.5);\n    attribute vec2 vertexPosition;\n    varying vec2 uv;\n    \n    void main() {\n       uv = vertexPosition.xy * mid + mid; // scale vertex attribute to [0-1] range\n       gl_Position = vec4(vertexPosition.xy,0.0,1.0);\n    }\n    \n`;\n\n\nexport default class LayerImage extends Layer {\n\n    constructor (gl, img) {\n\n        \n        super(gl);\n\n        this.texture = gl.createTexture();\n        this.img = img;\n        this.ready = true;\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n        gl.generateMipmap(gl.TEXTURE_2D);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n\n        this.program = this.initShader( gl );       \n\n        this.lifetime = 0;\n\n        this.dot = new Float32Array([0.5, 0.5, 30.0, .5]); // x, y, radius, trail\n    }\n\n    initShader (gl) {\n\n        // load and compile the fragment and vertex shader\n        let fragmentShader = super.createShader( FRAGMENT, gl.FRAGMENT_SHADER);\n        let vertexShader = super.createShader( VERTEX, gl.VERTEX_SHADER);\n\n        // link them together into a new program\n        this.program = gl.createProgram();\n        gl.attachShader(this.program, vertexShader);\n        gl.attachShader(this.program, fragmentShader);\n        gl.linkProgram(this.program);\n\n        // get pointers to the shader params\n        this.shaderVertexPositionAttribute = gl.getAttribLocation(this.program, 'vertexPosition');\n        gl.enableVertexAttribArray(this.shaderVertexPositionAttribute);\n\n        if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n            console.error( '[LayerBall] Could not initialize shaders' );\n        }\n\n        return this.program;\n    }\n\n    render ( elapsedTime ) {\n      \n        let gl = this.gl;\n\n        // set the vertex buffer to be drawn\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.geometry.buffer);\n\n        // set the shader\n        gl.useProgram(this.program);\n\n        // bind comon attributes and uniforms\n        gl.vertexAttribPointer(this.shaderVertexPositionAttribute, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n        gl.uniform1i(this.program.samplerUniform, 0);\n    \n        // draw\n        gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/layers/LayerImage.js\n **/","\"use strict\";\n\nimport Layer from './Layer';\nimport Stage from './../core/Stage';\n\nconst FRAGMENT = `\n\n    precision mediump float;\n\n    varying vec2 uv;\n\n    uniform vec4 dot;\n    \n    void main() {\n        vec4 color = vec4(0.0);\n        float radius = dot.z; // get the radius from dot[2]\n        vec2 pixelRatio = vec2(1.0, 1.0) / vec2(512.0, 512.0) * radius;\n        float b = ( 1.0 - length( ( dot.xy - uv ) / pixelRatio ) );\n        if ( b < .1 ) b = .0; \n        color.r = b;\n        color.g = b;\n        color.b = 0.0;\n        color.a = b;\n        gl_FragColor = color;\n    }\n`;\n\nconst VERTEX = `\n    \n    precision mediump float;\n\n    const vec2 mid=vec2(0.5,0.5);\n    attribute vec2 vertexPosition;\n    varying vec2 uv;\n    \n    void main() {\n       uv = vertexPosition.xy * mid + mid; // scale vertex attribute to [0-1] range\n       gl_Position = vec4(vertexPosition.xy,0.0,1.0);\n    }\n    \n`;\n\n\nexport default class LayerSimpleBall extends Layer {\n\n    constructor (gl) {\n        \n        super(gl);\n\n        this.program = this.initShader( gl );       \n\n        this.lifetime = 0;\n\n        this.dot = new Float32Array([0.5, 0.5, 30.0, .5]); // x, y, radius, trail\n    }\n\n    initShader (gl) {\n\n        // load and compile the fragment and vertex shader\n        let fragmentShader = super.createShader( FRAGMENT, gl.FRAGMENT_SHADER);\n        let vertexShader = super.createShader( VERTEX, gl.VERTEX_SHADER);\n\n        // link them together into a new program\n        this.program = gl.createProgram();\n        gl.attachShader(this.program, vertexShader);\n        gl.attachShader(this.program, fragmentShader);\n        gl.linkProgram(this.program);\n\n        // get pointers to the shader params\n        this.shaderVertexPositionAttribute = gl.getAttribLocation(this.program, 'vertexPosition');\n        gl.enableVertexAttribArray(this.shaderVertexPositionAttribute);\n        \n        if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n            console.error( '[LayerBall] Could not initialize shaders' );\n        }\n\n        return this.program;\n    }\n\n    render ( elapsedTime ) {\n   \n        this.lifetime += elapsedTime;\n   \n        let gl = this.gl;\n\n        // set the vertex buffer to be drawn\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.geometry.buffer);\n\n        // set the shader\n        gl.useProgram(this.program);\n\n        // bind comon attributes and uniforms\n        gl.vertexAttribPointer(this.shaderVertexPositionAttribute, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n\n        // bind updated ball properties\n        gl.uniform4fv(gl.getUniformLocation(this.program, \"dot\"), this.dot);\n\n        // draw\n        gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\n    }\n\n    set x(x) { this.dot[0] = x; }\n    set y(y) { this.dot[1] = y; }\n    set radius(radius) { this.dot[2] = radius; }\n    set trail(trail) { this.dot[3] = trail; }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/layers/LayerSimpleBall.js\n **/","export default class Clock {\n\n    constructor () {\n        this.timeBefore = Date.now();\n        this.lifeTime = 0;\n        this.elapsedTime = 0;\n    }\n\n    tick () {\n        this.elapsedTime = Date.now() - this.timeBefore;\n        this.timeBefore = Date.now();\n        this.lifeTime += this.elapsedTime;\n        return this.elapsedTime / 1000;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/utils/Clock.js\n **/","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mr.doob / http://mrdoob.com/\n */\n\nvar Detector = {\n\n\tcanvas: !! window.CanvasRenderingContext2D,\n\twebgl: ( function () {\n\n\t\ttry {\n\n\t\t\tvar canvas = document.createElement( 'canvas' ); return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\n\n\t\t} catch ( e ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t} )(),\n\tworkers: !! window.Worker,\n\tfileapi: window.File && window.FileReader && window.FileList && window.Blob,\n\n\tgetWebGLErrorMessage: function () {\n\n\t\tvar element = document.createElement( 'div' );\n\t\telement.id = 'webgl-error-message';\n\t\telement.style.fontFamily = 'monospace';\n\t\telement.style.fontSize = '13px';\n\t\telement.style.fontWeight = 'normal';\n\t\telement.style.textAlign = 'center';\n\t\telement.style.background = '#fff';\n\t\telement.style.color = '#000';\n\t\telement.style.padding = '1.5em';\n\t\telement.style.width = '400px';\n\t\telement.style.margin = '5em auto 0';\n\n\t\tif ( ! this.webgl ) {\n\n\t\t\telement.innerHTML = window.WebGLRenderingContext ? [\n\t\t\t\t'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />',\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n\t\t\t].join( '\\n' ) : [\n\t\t\t\t'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>',\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n\t\t\t].join( '\\n' );\n\n\t\t}\n\n\t\treturn element;\n\n\t},\n\n\taddGetWebGLMessage: function ( parameters ) {\n\n\t\tvar parent, id, element;\n\n\t\tparameters = parameters || {};\n\n\t\tparent = parameters.parent !== undefined ? parameters.parent : document.body;\n\t\tid = parameters.id !== undefined ? parameters.id : 'oldie';\n\n\t\telement = Detector.getWebGLErrorMessage();\n\t\telement.id = id;\n\n\t\tparent.appendChild( element );\n\n\t}\n\n};\n\n// browserify support\nif ( typeof module === 'object' ) {\n\n\tmodule.exports = Detector;\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/vendors/Detector.js\n **/","// stats.js - http://github.com/mrdoob/stats.js\nvar Stats=function(){function f(a,e,b){a=document.createElement(a);a.id=e;a.style.cssText=b;return a}function l(a,e,b){var c=f(\"div\",a,\"padding:0 0 3px 3px;text-align:left;background:\"+b),d=f(\"div\",a+\"Text\",\"font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:\"+e);d.innerHTML=a.toUpperCase();c.appendChild(d);a=f(\"div\",a+\"Graph\",\"width:74px;height:30px;background:\"+e);c.appendChild(a);for(e=0;74>e;e++)a.appendChild(f(\"span\",\"\",\"width:1px;height:30px;float:left;opacity:0.9;background:\"+\nb));return c}function m(a){for(var b=c.children,d=0;d<b.length;d++)b[d].style.display=d===a?\"block\":\"none\";n=a}function p(a,b){a.appendChild(a.firstChild).style.height=Math.min(30,30-30*b)+\"px\"}var q=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,k=q(),r=k,t=0,n=0,c=f(\"div\",\"stats\",\"width:80px;opacity:0.9;cursor:pointer\");c.addEventListener(\"mousedown\",function(a){a.preventDefault();m(++n%c.children.length)},!1);var d=0,u=Infinity,v=0,b=l(\"fps\",\"#0ff\",\"#002\"),\nA=b.children[0],B=b.children[1];c.appendChild(b);var g=0,w=Infinity,x=0,b=l(\"ms\",\"#0f0\",\"#020\"),C=b.children[0],D=b.children[1];c.appendChild(b);if(self.performance&&self.performance.memory){var h=0,y=Infinity,z=0,b=l(\"mb\",\"#f08\",\"#201\"),E=b.children[0],F=b.children[1];c.appendChild(b)}m(n);return{REVISION:14,domElement:c,setMode:m,begin:function(){k=q()},end:function(){var a=q();g=a-k;w=Math.min(w,g);x=Math.max(x,g);C.textContent=(g|0)+\" MS (\"+(w|0)+\"-\"+(x|0)+\")\";p(D,g/200);t++;if(a>r+1E3&&(d=Math.round(1E3*\nt/(a-r)),u=Math.min(u,d),v=Math.max(v,d),A.textContent=d+\" FPS (\"+u+\"-\"+v+\")\",p(B,d/100),r=a,t=0,void 0!==h)){var b=performance.memory.usedJSHeapSize,c=performance.memory.jsHeapSizeLimit;h=Math.round(9.54E-7*b);y=Math.min(y,h);z=Math.max(z,h);E.textContent=h+\" MB (\"+y+\"-\"+z+\")\";p(F,b/c)}return a},update:function(){k=this.end()}}};\"object\"===typeof module&&(module.exports=Stats);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/vendors/Stats.min.js\n **/"],"sourceRoot":""}