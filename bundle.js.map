{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap daaaa73029528a3e85a1","webpack:///./src/js/core/Stage.js","webpack:///./src/js/layers/Layer.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/js/Game.js","webpack:///./src/js/Main.js","webpack:///./src/js/core/Renderer.js","webpack:///./src/js/layers/LayerBallTrail.js","webpack:///./src/js/layers/LayerImage.js","webpack:///./src/js/layers/LayerSimpleBall.js","webpack:///./src/js/layers/ParticleSystem.js","webpack:///./src/js/utils/Clock.js","webpack:///./src/js/vendors/Detector.js","webpack:///./src/js/vendors/Stats.min.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_Renderer","_Renderer2","_Clock","_Clock2","singletonEnforcer","Symbol","Stage","enforcer","canvas","options","this","clock","layers","renderer","update","console","log","getInstance","gl","layer","addLayer","removeLayer","index","setLayerIndex","callback","beforeUpdateHandler","afterUpdateHandler","window","requestAnimationFrame","bind","elapsedTime","tick","clear","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","iterator","next","done","render","err","push","DEFAULT_FRAGMENT","DEFAULT_VERTEX","Layer","geometry","getDefaultGeometry","vertexBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","verts","Float32Array","bufferData","STATIC_DRAW","buffer","vertSize","nVerts","primtype","TRIANGLE_STRIP","str","type","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","error","getShaderInfoLog","warn","webpackPolyfill","deprecate","paths","children","_Stage","_Stage2","_LayerSimpleBall","_LayerSimpleBall2","_LayerBallTrail","_LayerBallTrail2","_LayerImage","_ParticleSystem","_ParticleSystem2","_Stats","_Stats2","Game","_this","image","Image","onload","init","src","bgImg","initialize","document","getElementById","contain","particleSystem","getGL","velocity","x","y","attenuation","size","rgba","ball","radius","trailBall","speedX","speedY","lifetime","stats","container","appendChild","domElement","addEventListener","onDocumentMouseDown","event","preventDefault","Math","sin","spawn","random","_Detector","_Detector2","_Game","_Game2","webgl","addGetWebGLMessage","Renderer","hasOwnProperty","initWebGL","initViewport","onWindowResize","getContext","alpha","antialias","preserveDrawingBuffer","e","msg","toString","alert","Error","viewport","width","height","bindTexture","TEXTURE_2D","bindRenderbuffer","RENDERBUFFER","bindFramebuffer","FRAMEBUFFER","clearColor","COLOR_BUFFER_BIT","enable","BLEND","disable","DEPTH_TEST","blendFunc","SRC_ALPHA","ONE","scale","max","min","innerWidth","innerHeight","style","transformOrigin","left","toFixed","top","transform","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","getFragmentPreviousFrame","trail","_get","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","_Layer2","_Layer3","FRAGMENT_BALL","FRAGMENT_MERGE","VERTEX","LayerSimpleBall","_Layer","dot","initTextureBuffers","pointersBall","initShaderBall","pointersMerge","initShaderMerge","pointersPreviousFrame","initShaderPreviousFrame","ballRTT","createTexture","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_NEAREST","texImage2D","RGBA","UNSIGNED_BYTE","generateMipmap","ballFrameBuffer","createFramebuffer","framebufferTexture2D","COLOR_ATTACHMENT0","previousRTT","previousFrameBuffer","mergeRTT","mergeFrameBuffer","fragmentShader","FRAGMENT_SHADER","vertexShader","VERTEX_SHADER","programBall","createProgram","attachShader","linkProgram","pointers","vertexPosition","getAttribLocation","getUniformLocation","enableVertexAttribArray","validateProgram","programMerge","previous","programPreviousFrame","program","getProgramParameter","LINK_STATUS","blendEquation","FUNC_ADD","DST_ALPHA","useProgram","vertexAttribPointer","FLOAT","uniform4fv","drawArrays","uniform1i","activeTexture","TEXTURE0","TEXTURE1","set","FRAGMENT","LayerImage","img","texture","ready","initShader","shaderVertexPositionAttribute","samplerUniform","ParticleSystem","poolSize","settings","current","assign","colors","positions","sizes","i2","i4","colorsBuffer","positionsBuffer","sizesBuffer","locations","color","uv","needsUpdate","updateParticles","uniformMatrix4fv","POINTS","r","g","b","a","Clock","timeBefore","Date","now","lifeTime","_typeof","Detector","CanvasRenderingContext2D","createElement","WebGLRenderingContext","workers","Worker","fileapi","File","FileReader","FileList","Blob","getWebGLErrorMessage","element","fontFamily","fontSize","fontWeight","textAlign","background","padding","margin","innerHTML","join","parameters","body","Stats","f","cssText","l","d","toUpperCase","display","n","firstChild","q","performance","k","t","u","Infinity","v","A","B","w","C","D","memory","h","z","E","F","REVISION","setMode","begin","end","textContent","round","usedJSHeapSize","jsHeapSizeLimit"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(5);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Renderer = __webpack_require__(6);\n\t\n\tvar _Renderer2 = _interopRequireDefault(_Renderer);\n\t\n\tvar _Clock = __webpack_require__(11);\n\t\n\tvar _Clock2 = _interopRequireDefault(_Clock);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar singletonEnforcer = Symbol();\n\tvar instance = Symbol();\n\t\n\tvar Stage = function () {\n\t    _createClass(Stage, null, [{\n\t        key: 'initialize',\n\t        value: function initialize(canvas, options) {\n\t\n\t            if (this[instance]) {\n\t                throw '[Stage] Already initialized.';\n\t            }\n\t\n\t            this[instance] = new Stage(singletonEnforcer, canvas, options);\n\t            return this[instance];\n\t        }\n\t    }, {\n\t        key: 'getInstance',\n\t        value: function getInstance() {\n\t\n\t            if (!this[instance]) {\n\t                throw '[Stage] Must first call `Stage.initialize(canvas, options)`.';\n\t            }\n\t            return this[instance];\n\t        }\n\t    }, {\n\t        key: 'getRenderer',\n\t        value: function getRenderer() {\n\t            return Stage.getInstance().renderer;\n\t        }\n\t    }, {\n\t        key: 'getGL',\n\t        value: function getGL() {\n\t            return Stage.getInstance().renderer.gl;\n\t        }\n\t    }, {\n\t        key: 'addLayer',\n\t        value: function addLayer(layer) {\n\t            Stage.getInstance().addLayer(layer);\n\t        }\n\t    }, {\n\t        key: 'removeLayer',\n\t        value: function removeLayer(layer) {\n\t            Stage.getInstance().removeLayer(layer);\n\t        }\n\t    }, {\n\t        key: 'setLayerIndex',\n\t        value: function setLayerIndex(layer, index) {\n\t            Stage.getInstance().setLayerIndex(layer, index);\n\t        }\n\t    }, {\n\t        key: 'beforeUpdateHandler',\n\t        value: function beforeUpdateHandler(callback) {\n\t            Stage.getInstance().beforeUpdateHandler = callback;\n\t        }\n\t    }, {\n\t        key: 'afterUpdateHandler',\n\t        value: function afterUpdateHandler(callback) {\n\t            Stage.getInstance().afterUpdateHandler = callback;\n\t        }\n\t    }]);\n\t\n\t    function Stage(enforcer, canvas, options) {\n\t        _classCallCheck(this, Stage);\n\t\n\t        if (enforcer !== singletonEnforcer) {\n\t            throw '[Stage] Singleton class, use `Stage.getInstance()` instead.';\n\t        }\n\t\n\t        this.clock = new _Clock2.default();\n\t\n\t        this.layers = [];\n\t\n\t        this.renderer = new _Renderer2.default(canvas, options);\n\t\n\t        this.update();\n\t\n\t        console.log('[Stage] initialized.');\n\t    }\n\t\n\t    _createClass(Stage, [{\n\t        key: 'update',\n\t        value: function update() {\n\t\n\t            window.requestAnimationFrame(this.update.bind(this));\n\t\n\t            var elapsedTime = this.clock.tick();\n\t\n\t            if (this.beforeUpdateHandler) this.beforeUpdateHandler(elapsedTime);\n\t\n\t            this.renderer.clear();\n\t\n\t            var _iteratorNormalCompletion = true;\n\t            var _didIteratorError = false;\n\t            var _iteratorError = undefined;\n\t\n\t            try {\n\t                for (var _iterator = this.layers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t                    var layer = _step.value;\n\t                    layer.render(elapsedTime);\n\t                }\n\t            } catch (err) {\n\t                _didIteratorError = true;\n\t                _iteratorError = err;\n\t            } finally {\n\t                try {\n\t                    if (!_iteratorNormalCompletion && _iterator.return) {\n\t                        _iterator.return();\n\t                    }\n\t                } finally {\n\t                    if (_didIteratorError) {\n\t                        throw _iteratorError;\n\t                    }\n\t                }\n\t            }\n\t\n\t            if (this.afterUpdateHandler) this.afterUpdateHandler(elapsedTime);\n\t        }\n\t    }, {\n\t        key: 'addLayer',\n\t        value: function addLayer(layer) {\n\t            this.layers.push(layer);\n\t        }\n\t    }, {\n\t        key: 'removeLayer',\n\t        value: function removeLayer(layer) {\n\t            console.log('[Stage] TO DO: implement removeLayer.');\n\t        }\n\t    }, {\n\t        key: 'setLayerIndex',\n\t        value: function setLayerIndex(layer, index) {\n\t            console.log('[Stage] TO DO: implement setLayerIndex.');\n\t        }\n\t    }]);\n\t\n\t    return Stage;\n\t}();\n\t\n\texports.default = Stage;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar DEFAULT_FRAGMENT = \"\\n    void main(void) {\\n        gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0); // default debug purple\\n    }\\n\";\n\t\n\tvar DEFAULT_VERTEX = \"\\n    attribute vec3 vertexPos;\\n    uniform mat4 modelViewMatrix;\\n    uniform mat4 projectionMatrix;\\n    void main(void) {\\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPos, 1.0);\\n    }\\n\";\n\t\n\tvar Layer = function () {\n\t    function Layer(gl) {\n\t        _classCallCheck(this, Layer);\n\t\n\t        this.gl = gl;\n\t\n\t        this.geometry = this.getDefaultGeometry(gl);\n\t\n\t        if (this.render === undefined) throw new TypeError(\"Must override method 'render'.\");\n\t\n\t        console.log('[Layer] initialized.');\n\t    }\n\t\n\t    _createClass(Layer, [{\n\t        key: \"getDefaultGeometry\",\n\t        value: function getDefaultGeometry(gl) {\n\t\n\t            var vertexBuffer = gl.createBuffer();\n\t            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n\t            var verts = new Float32Array([1.0, 1.0, 0.0, -1.0, 1.0, 0.0, 1.0, -1.0, 0.0, -1.0, -1.0, 0.0]);\n\t            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verts), gl.STATIC_DRAW);\n\t            var geometry = { buffer: vertexBuffer, vertSize: 3, nVerts: 4, primtype: gl.TRIANGLE_STRIP };\n\t            return geometry;\n\t        }\n\t    }, {\n\t        key: \"getDefaultFragment\",\n\t        value: function getDefaultFragment() {\n\t            return DEFAULT_FRAGMENT;\n\t        }\n\t    }, {\n\t        key: \"getDefaultVertex\",\n\t        value: function getDefaultVertex() {\n\t            return DEFAULT_VERTEX;\n\t        }\n\t    }, {\n\t        key: \"createShader\",\n\t        value: function createShader(str, type) {\n\t            var shader = this.gl.createShader(type);\n\t            this.gl.shaderSource(shader, str);\n\t            this.gl.compileShader(shader);\n\t            if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\n\t                console.error('[Layer] ', this.gl.getShaderInfoLog(shader));\n\t                return null;\n\t            }\n\t            return shader;\n\t        }\n\t    }, {\n\t        key: \"update\",\n\t        value: function update(elapsedTime) {\n\t            console.warn('Implement update() method for', this);\n\t        }\n\t    }, {\n\t        key: \"render\",\n\t        value: function render() {\n\t            console.warn('Implement render() method for', this);\n\t        }\n\t    }]);\n\t\n\t    return Layer;\n\t}();\n\t\n\texports.default = Layer;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(module) {\r\n\t\tif(!module.webpackPolyfill) {\r\n\t\t\tmodule.deprecate = function() {};\r\n\t\t\tmodule.paths = [];\r\n\t\t\t// module.parent = undefined by default\r\n\t\t\tmodule.children = [];\r\n\t\t\tmodule.webpackPolyfill = 1;\r\n\t\t}\r\n\t\treturn module;\r\n\t}\r\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Stage = __webpack_require__(1);\n\t\n\tvar _Stage2 = _interopRequireDefault(_Stage);\n\t\n\tvar _LayerSimpleBall = __webpack_require__(9);\n\t\n\tvar _LayerSimpleBall2 = _interopRequireDefault(_LayerSimpleBall);\n\t\n\tvar _LayerBallTrail = __webpack_require__(7);\n\t\n\tvar _LayerBallTrail2 = _interopRequireDefault(_LayerBallTrail);\n\t\n\tvar _LayerImage = __webpack_require__(8);\n\t\n\tvar _LayerImage2 = _interopRequireDefault(_LayerImage);\n\t\n\tvar _ParticleSystem = __webpack_require__(10);\n\t\n\tvar _ParticleSystem2 = _interopRequireDefault(_ParticleSystem);\n\t\n\tvar _Stats = __webpack_require__(13);\n\t\n\tvar _Stats2 = _interopRequireDefault(_Stats);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Game = function () {\n\t    function Game(options) {\n\t        var _this = this;\n\t\n\t        _classCallCheck(this, Game);\n\t\n\t        var image = new Image();\n\t        image.onload = function () {\n\t            return _this.init(image);\n\t        };\n\t        image.src = 'assets/img/field.png';\n\t    }\n\t\n\t    _createClass(Game, [{\n\t        key: 'init',\n\t        value: function init(bgImg) {\n\t\n\t            _Stage2.default.initialize(document.getElementById('canvas'), {\n\t                contain: true\n\t            });\n\t\n\t            // this.bg = new LayerImage( Stage.getGL(), bgImg );\n\t            // Stage.addLayer( this.bg );\n\t\n\t            this.particleSystem = new _ParticleSystem2.default(_Stage2.default.getGL(), 1000, {\n\t                velocity: {\n\t                    x: 0.4,\n\t                    y: 1\n\t                },\n\t                attenuation: 30,\n\t                size: 40,\n\t                rgba: [1, 1, 1, 1]\n\t            });\n\t            _Stage2.default.addLayer(this.particleSystem);\n\t\n\t            this.ball = new _LayerSimpleBall2.default(_Stage2.default.getGL());\n\t            this.ball.radius = 25.0;\n\t            _Stage2.default.addLayer(this.ball);\n\t\n\t            this.trailBall = new _LayerBallTrail2.default(_Stage2.default.getGL(), 20, .01);\n\t            this.trailBall.speedX = 2;\n\t            this.trailBall.speedY = 3;\n\t            _Stage2.default.addLayer(this.trailBall);\n\t\n\t            _Stage2.default.beforeUpdateHandler(this.update.bind(this));\n\t            _Stage2.default.afterUpdateHandler(null);\n\t\n\t            this.lifetime = 0;\n\t\n\t            this.stats = new _Stats2.default();\n\t\n\t            var container = document.getElementById('container');\n\t            container.appendChild(this.stats.domElement);\n\t\n\t            document.addEventListener('mousedown', this.onDocumentMouseDown.bind(this), false);\n\t        }\n\t    }, {\n\t        key: 'onDocumentMouseDown',\n\t        value: function onDocumentMouseDown(event) {\n\t\n\t            event.preventDefault();\n\t        }\n\t    }, {\n\t        key: 'update',\n\t        value: function update(elapsedTime) {\n\t\n\t            this.lifetime += elapsedTime;\n\t\n\t            this.ball.x = (Math.sin(this.lifetime * 3) + 1) / 2 * .8 + .1;\n\t            this.ball.y = (Math.sin(this.lifetime * 2.6) + 1) / 2 * .8 + .1;\n\t\n\t            this.trailBall.x = (Math.sin(this.lifetime * this.trailBall.speedX) + 1) / 2 * .8 + .1;\n\t            this.trailBall.y = (Math.sin(this.lifetime * this.trailBall.speedY) + 1) / 2 * .8 + .1;\n\t\n\t            this.particleSystem.spawn(this.ball.x - .005 + Math.random() * 0.01, this.ball.y - .005 + Math.random() * 0.01, 30 * Math.random(), Math.random(), Math.random(), Math.random(), Math.random());\n\t\n\t            this.particleSystem.spawn(this.trailBall.x - .05 + Math.random() * 0.1, this.trailBall.y - .05 + Math.random() * 0.1, 60 * Math.random(), Math.random(), Math.random(), Math.random(), Math.random());\n\t\n\t            this.stats.update();\n\t        }\n\t    }]);\n\t\n\t    return Game;\n\t}();\n\t\n\texports.default = Game;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(14);\n\t\n\tvar _Detector = __webpack_require__(12);\n\t\n\tvar _Detector2 = _interopRequireDefault(_Detector);\n\t\n\tvar _Game = __webpack_require__(4);\n\t\n\tvar _Game2 = _interopRequireDefault(_Game);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tif (!_Detector2.default.webgl) _Detector2.default.addGetWebGLMessage();\n\t\n\twindow.addEventListener('load', function () {\n\t    var game = new _Game2.default({});\n\t});\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Renderer = function () {\n\t    function Renderer(canvas, options) {\n\t        _classCallCheck(this, Renderer);\n\t\n\t        this.canvas = canvas;\n\t\n\t        options = options || {};\n\t        this.contain = options.hasOwnProperty('contain') ? options.contain : true;\n\t\n\t        this.gl = this.initWebGL(canvas);\n\t        this.initViewport(this.gl, canvas);\n\t\n\t        window.addEventListener('resize', this.onWindowResize.bind(this), false);\n\t        this.onWindowResize();\n\t\n\t        console.log('[Renderer] initialized.');\n\t    }\n\t\n\t    _createClass(Renderer, [{\n\t        key: 'initWebGL',\n\t        value: function initWebGL(canvas) {\n\t            var gl = void 0;\n\t            try {\n\t                gl = this.canvas.getContext('webgl', {\n\t                    alpha: true,\n\t                    // depth: true,\n\t                    // stencil:true,\n\t                    antialias: true,\n\t                    // premultipliedAlpha: true,\n\t                    preserveDrawingBuffer: true\n\t                });\n\t            } // failIfMajorPerformanceCaveat: true\n\t            catch (e) {\n\t                var msg = \"Error creating WebGL Context!: \" + e.toString();\n\t                alert(msg);\n\t                throw Error(msg);\n\t            }\n\t            return gl;\n\t        }\n\t    }, {\n\t        key: 'initViewport',\n\t        value: function initViewport(gl, canvas) {\n\t            gl.viewport(0, 0, canvas.width, canvas.height);\n\t        }\n\t    }, {\n\t        key: 'clear',\n\t        value: function clear() {\n\t\n\t            this.gl.bindTexture(this.gl.TEXTURE_2D, null);\n\t            this.gl.bindRenderbuffer(this.gl.RENDERBUFFER, null);\n\t            this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, null);\n\t\n\t            this.gl.clearColor(0.0, 0.0, 0.0, 0.0);\n\t            this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n\t\n\t            this.gl.enable(this.gl.BLEND);\n\t            this.gl.disable(this.gl.DEPTH_TEST);\n\t            this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE);\n\t        }\n\t    }, {\n\t        key: 'onWindowResize',\n\t        value: function onWindowResize() {\n\t\n\t            var scale = 1 / (this.contain ? Math.max : Math.min)(this.canvas.width / window.innerWidth, this.canvas.height / window.innerHeight);\n\t            canvas.style.transformOrigin = 'top left';\n\t            canvas.style.left = ((window.innerWidth - this.canvas.width * scale) / 2).toFixed(2) + 'px';\n\t            canvas.style.top = ((window.innerHeight - this.canvas.height * scale) / 2).toFixed(2) + 'px';\n\t            canvas.style.transform = 'scale(' + scale.toFixed(2) + ')';\n\t        }\n\t    }]);\n\t\n\t    return Renderer;\n\t}();\n\t\n\texports.default = Renderer;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _Layer2 = __webpack_require__(2);\n\t\n\tvar _Layer3 = _interopRequireDefault(_Layer2);\n\t\n\tvar _Stage = __webpack_require__(1);\n\t\n\tvar _Stage2 = _interopRequireDefault(_Stage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar FRAGMENT_BALL = '\\n\\n    precision mediump float;\\n\\n    varying vec2 uv;\\n\\n    uniform vec4 dot;\\n    \\n    void main() {\\n        vec4 color = vec4(0.0);\\n        float radius = 1.0 / 512.0 * dot.z;\\n        float b = ( 1.0 - length( ( dot.xy - uv ) / radius ) );\\n        color.r = b;\\n        color.g = b*.4;\\n        color.b = b;\\n        color.a = b;\\n        gl_FragColor = color;\\n    }\\n';\n\t\n\tvar FRAGMENT_MERGE = '\\n\\n    precision mediump float;\\n\\n    varying vec2 uv;\\n\\n    uniform sampler2D ball;\\n    uniform sampler2D previous;\\n\\n    void main() { \\n\\n        vec4 colorBall = texture2D(ball, uv);\\n        vec4 colorPrevious = texture2D(previous, uv);\\n\\n        gl_FragColor = vec4(0.0);\\n        gl_FragColor.a = colorBall.a + colorPrevious.a;\\n\\n        gl_FragColor.r = gl_FragColor.a;\\n        gl_FragColor.g = gl_FragColor.a*.4;\\n        gl_FragColor.b = gl_FragColor.a;\\n\\n    }\\n';\n\t\n\tfunction getFragmentPreviousFrame(trail) {\n\t    return '\\n\\n    precision mediump float;\\n\\n    varying vec2 uv;\\n\\n    uniform sampler2D previous;\\n\\n    const float trail = ' + trail + '; \\n    const float blur = 0.125;\\n    const float weight = .88;\\n    \\n    void main() { \\n        \\n        vec2 onePixel = vec2(1.0, 1.0) / vec2(512., 512.);\\n        vec4 color = texture2D(previous, uv + onePixel * vec2(-1, -1)) * blur +\\n        texture2D(previous, uv + onePixel * vec2( 0, -1)) * blur +\\n        texture2D(previous, uv + onePixel * vec2( 1, -1)) * blur +\\n        texture2D(previous, uv + onePixel * vec2(-1,  0)) * blur +\\n        texture2D(previous, uv + onePixel * vec2( 0,  0)) * blur +\\n        texture2D(previous, uv + onePixel * vec2( 1,  0)) * blur +\\n        texture2D(previous, uv + onePixel * vec2(-1,  1)) * blur +\\n        texture2D(previous, uv + onePixel * vec2( 0,  1)) * blur +\\n        texture2D(previous, uv + onePixel * vec2( 1,  1)) * blur ;\\n        color *= weight;\\n        \\n        gl_FragColor = color;\\n        gl_FragColor.a -= trail;\\n\\n        if ( gl_FragColor.a < 0.2 ) gl_FragColor = vec4(0.0);\\n        // if ( gl_FragColor.a < 0.101 && gl_FragColor.a > 0.1 ) gl_FragColor = vec4(0.101/ gl_FragColor.a, .101/ gl_FragColor.a, .101/ gl_FragColor.a, .101/ gl_FragColor.a);\\n        // if ( gl_FragColor.a < 0.101 && gl_FragColor.a > 0.1 ) gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\\n    }\\n';\n\t}\n\t\n\tvar VERTEX = '\\n    \\n    precision mediump float;\\n\\n    const vec2 mid=vec2(0.5,0.5);\\n    attribute vec2 vertexPosition;\\n    varying vec2 uv;\\n    \\n    void main() {\\n       uv = vertexPosition.xy * mid + mid; // scale vertex attribute to [0-1] range\\n       gl_Position = vec4(vertexPosition.xy,0.0,1.0);\\n    }\\n\\n';\n\t\n\tvar LayerSimpleBall = function (_Layer) {\n\t    _inherits(LayerSimpleBall, _Layer);\n\t\n\t    function LayerSimpleBall(gl, radius, trail) {\n\t        _classCallCheck(this, LayerSimpleBall);\n\t\n\t        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(LayerSimpleBall).call(this, gl));\n\t\n\t        _this.lifetime = 0;\n\t\n\t        _this.dot = new Float32Array([0.5, 0.5, radius, trail]); // x, y, radius, trail\n\t\n\t        /** Render pipeline *********************************\n\t          *     coordinates             >> BallRTT          *\n\t          *     PreviousRTT + BallRTT   >> MergeRTT         *\n\t          *     MergeRTT                >> previousRTT      *\n\t          *     MergeRTT                >> SCREEN           *\n\t          ***************************************************/\n\t\n\t        /** Buffers **/\n\t        _this.initTextureBuffers(gl);\n\t\n\t        /** Ball **/\n\t        _this.pointersBall = _this.initShaderBall(gl);\n\t\n\t        /** Merge **/\n\t        _this.pointersMerge = _this.initShaderMerge(gl);\n\t\n\t        /** Previous **/\n\t        _this.pointersPreviousFrame = _this.initShaderPreviousFrame(gl);\n\t\n\t        return _this;\n\t    }\n\t\n\t    _createClass(LayerSimpleBall, [{\n\t        key: 'initTextureBuffers',\n\t        value: function initTextureBuffers(gl) {\n\t\n\t            this.ballRTT = gl.createTexture();\n\t            gl.bindTexture(gl.TEXTURE_2D, this.ballRTT);\n\t            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n\t            gl.texImage2D(this.gl.TEXTURE_2D, 0, gl.RGBA, 512, 512, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\t            gl.generateMipmap(gl.TEXTURE_2D);\n\t            gl.bindTexture(gl.TEXTURE_2D, null);\n\t            this.ballFrameBuffer = gl.createFramebuffer();\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, this.ballFrameBuffer);\n\t            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.ballRTT, 0);\n\t            this.ballFrameBuffer.width = 512;\n\t            this.ballFrameBuffer.height = 512;\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\n\t            this.previousRTT = gl.createTexture();\n\t            gl.bindTexture(gl.TEXTURE_2D, this.previousRTT);\n\t            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n\t            gl.texImage2D(this.gl.TEXTURE_2D, 0, gl.RGBA, 512, 512, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\t            gl.generateMipmap(gl.TEXTURE_2D);\n\t            gl.bindTexture(gl.TEXTURE_2D, null);\n\t            this.previousFrameBuffer = gl.createFramebuffer();\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, this.previousFrameBuffer);\n\t            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.previousRTT, 0);\n\t            this.previousFrameBuffer.width = 512;\n\t            this.previousFrameBuffer.height = 512;\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\n\t            this.mergeRTT = gl.createTexture();\n\t            gl.bindTexture(gl.TEXTURE_2D, this.mergeRTT);\n\t            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n\t            gl.texImage2D(this.gl.TEXTURE_2D, 0, gl.RGBA, 512, 512, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\t            gl.generateMipmap(gl.TEXTURE_2D);\n\t            gl.bindTexture(gl.TEXTURE_2D, null);\n\t            this.mergeFrameBuffer = gl.createFramebuffer();\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, this.mergeFrameBuffer);\n\t            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.mergeRTT, 0);\n\t            this.mergeFrameBuffer.width = 512;\n\t            this.mergeFrameBuffer.height = 512;\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t        }\n\t    }, {\n\t        key: 'initShaderBall',\n\t        value: function initShaderBall(gl) {\n\t\n\t            // load and compile the fragment and vertex shader\n\t            var fragmentShader = _get(Object.getPrototypeOf(LayerSimpleBall.prototype), 'createShader', this).call(this, FRAGMENT_BALL, gl.FRAGMENT_SHADER);\n\t            var vertexShader = _get(Object.getPrototypeOf(LayerSimpleBall.prototype), 'createShader', this).call(this, VERTEX, gl.VERTEX_SHADER);\n\t\n\t            this.programBall = gl.createProgram();\n\t            gl.attachShader(this.programBall, vertexShader);\n\t            gl.attachShader(this.programBall, fragmentShader);\n\t            gl.linkProgram(this.programBall);\n\t\n\t            // get pointers to the shader params\n\t            var pointers = {\n\t                'vertexPosition': gl.getAttribLocation(this.programBall, 'vertexPosition'),\n\t                'dot': gl.getUniformLocation(this.programBall, 'dot')\n\t            };\n\t\n\t            gl.enableVertexAttribArray(pointers.vertexPosition);\n\t\n\t            this.validateProgram(this.programBall);\n\t\n\t            return pointers;\n\t        }\n\t    }, {\n\t        key: 'initShaderMerge',\n\t        value: function initShaderMerge(gl) {\n\t            // load and compile the fragment and vertex shader\n\t            var fragmentShader = _get(Object.getPrototypeOf(LayerSimpleBall.prototype), 'createShader', this).call(this, FRAGMENT_MERGE, gl.FRAGMENT_SHADER);\n\t            var vertexShader = _get(Object.getPrototypeOf(LayerSimpleBall.prototype), 'createShader', this).call(this, VERTEX, gl.VERTEX_SHADER);\n\t\n\t            this.programMerge = gl.createProgram();\n\t            gl.attachShader(this.programMerge, vertexShader);\n\t            gl.attachShader(this.programMerge, fragmentShader);\n\t            gl.linkProgram(this.programMerge);\n\t\n\t            // get pointers to the shader params\n\t            var pointers = {\n\t                'vertexPosition': gl.getAttribLocation(this.programMerge, 'vertexPosition'),\n\t                'ball': gl.getUniformLocation(this.programMerge, 'ball'),\n\t                'previous': gl.getUniformLocation(this.programMerge, 'previous')\n\t            };\n\t\n\t            gl.enableVertexAttribArray(pointers.vertexPosition);\n\t\n\t            this.validateProgram(this.programMerge);\n\t\n\t            return pointers;\n\t        }\n\t    }, {\n\t        key: 'initShaderPreviousFrame',\n\t        value: function initShaderPreviousFrame(gl) {\n\t\n\t            // load and compile the fragment and vertex shader\n\t            var fragmentShader = _get(Object.getPrototypeOf(LayerSimpleBall.prototype), 'createShader', this).call(this, getFragmentPreviousFrame(this.dot[3].toFixed(2)), gl.FRAGMENT_SHADER);\n\t            var vertexShader = _get(Object.getPrototypeOf(LayerSimpleBall.prototype), 'createShader', this).call(this, VERTEX, gl.VERTEX_SHADER);\n\t\n\t            this.programPreviousFrame = gl.createProgram();\n\t            gl.attachShader(this.programPreviousFrame, vertexShader);\n\t            gl.attachShader(this.programPreviousFrame, fragmentShader);\n\t            gl.linkProgram(this.programPreviousFrame);\n\t\n\t            // get pointers to the shader params\n\t            var pointers = {\n\t                'vertexPosition': gl.getAttribLocation(this.programPreviousFrame, 'vertexPosition'),\n\t                'previous': gl.getUniformLocation(this.programPreviousFrame, 'previous')\n\t            };\n\t\n\t            gl.enableVertexAttribArray(pointers.vertexPosition);\n\t\n\t            this.validateProgram(this.programPreviousFrame);\n\t\n\t            return pointers;\n\t        }\n\t    }, {\n\t        key: 'validateProgram',\n\t        value: function validateProgram(program) {\n\t            if (!this.gl.getProgramParameter(program, this.gl.LINK_STATUS)) {\n\t                console.error('[LayerBall] Could not initialize shaders');\n\t            }\n\t        }\n\t    }, {\n\t        key: 'render',\n\t        value: function render(elapsedTime) {\n\t\n\t            this.lifetime += elapsedTime;\n\t\n\t            var gl = this.gl;\n\t\n\t            gl.blendEquation(gl.FUNC_ADD);\n\t            gl.blendFunc(gl.ONE, gl.DST_ALPHA);\n\t\n\t            gl.bindBuffer(gl.ARRAY_BUFFER, this.geometry.buffer);\n\t\n\t            /*     coordinates             >> BallRTT          */\n\t            gl.useProgram(this.programBall);\n\t            gl.vertexAttribPointer(this.pointersBall.vertexPosition, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n\t            gl.uniform4fv(this.pointersBall.dot, this.dot);\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, this.ballFrameBuffer);\n\t            gl.clearColor(0.0, 0.0, 0.0, 0.0);\n\t            gl.clear(gl.COLOR_BUFFER_BIT);\n\t            gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\n\t            /*     PreviousRTT + BallRTT   >> MergeRTT         */\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, this.mergeFrameBuffer);\n\t\n\t            gl.useProgram(this.programMerge);\n\t            gl.vertexAttribPointer(this.pointersMerge.vertexPosition, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n\t            gl.uniform1i(this.pointersMerge.ball, 0); // texture unit 0\n\t            gl.uniform1i(this.pointersMerge.previous, 1); // texture unit 1\n\t            gl.activeTexture(gl.TEXTURE0);\n\t            gl.bindTexture(gl.TEXTURE_2D, this.ballRTT);\n\t            gl.activeTexture(gl.TEXTURE1);\n\t            gl.bindTexture(gl.TEXTURE_2D, this.previousRTT);\n\t            gl.clearColor(0.0, 0.0, 0.0, 0.0);\n\t            gl.clear(gl.COLOR_BUFFER_BIT);\n\t            gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\t\n\t            /*     MergeRTT                >> previousRTT      */\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, this.previousFrameBuffer);\n\t            gl.useProgram(this.programPreviousFrame);\n\t            gl.vertexAttribPointer(this.pointersPreviousFrame.vertexPosition, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n\t            gl.uniform1i(this.pointersPreviousFrame.previous, 0);\n\t            gl.activeTexture(gl.TEXTURE0);\n\t            gl.bindTexture(gl.TEXTURE_2D, this.mergeRTT);\n\t            gl.clearColor(0.0, 0.0, 0.0, 0.0);\n\t            gl.clear(gl.COLOR_BUFFER_BIT);\n\t            gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\t\n\t            gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n\t\n\t            /*     MergeRTT                >> SCREEN           */\n\t            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t            gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\t        }\n\t    }, {\n\t        key: 'x',\n\t        set: function set(x) {\n\t            this.dot[0] = x;\n\t        },\n\t        get: function get() {\n\t            return this.dot[0];\n\t        }\n\t    }, {\n\t        key: 'y',\n\t        set: function set(y) {\n\t            this.dot[1] = y;\n\t        },\n\t        get: function get() {\n\t            return this.dot[1];\n\t        }\n\t    }, {\n\t        key: 'radius',\n\t        set: function set(radius) {\n\t            this.dot[2] = radius;\n\t        }\n\t    }, {\n\t        key: 'trail',\n\t        set: function set(trail) {\n\t            this.dot[3] = trail;\n\t        }\n\t    }]);\n\t\n\t    return LayerSimpleBall;\n\t}(_Layer3.default);\n\t\n\texports.default = LayerSimpleBall;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _Layer2 = __webpack_require__(2);\n\t\n\tvar _Layer3 = _interopRequireDefault(_Layer2);\n\t\n\tvar _Stage = __webpack_require__(1);\n\t\n\tvar _Stage2 = _interopRequireDefault(_Stage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar FRAGMENT = '\\n\\n    precision mediump float;\\n\\n    varying vec2 uv;\\n    \\n    uniform sampler2D image;\\n\\n    void main() { \\n        gl_FragColor = texture2D(image, uv);\\n    }\\n';\n\t\n\tvar VERTEX = '\\n    \\n    precision mediump float;\\n\\n    const vec2 mid=vec2(0.5,0.5);\\n    attribute vec2 vertexPosition;\\n    varying vec2 uv;\\n    \\n    void main() {\\n       uv = vertexPosition.xy * mid + mid; // scale vertex attribute to [0-1] range\\n       gl_Position = vec4(vertexPosition.xy,0.0,1.0);\\n    }\\n    \\n';\n\t\n\tvar LayerImage = function (_Layer) {\n\t    _inherits(LayerImage, _Layer);\n\t\n\t    function LayerImage(gl, img) {\n\t        _classCallCheck(this, LayerImage);\n\t\n\t        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(LayerImage).call(this, gl));\n\t\n\t        _this.texture = gl.createTexture();\n\t        _this.img = img;\n\t        _this.ready = true;\n\t        gl.bindTexture(gl.TEXTURE_2D, _this.texture);\n\t        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n\t        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n\t        gl.generateMipmap(gl.TEXTURE_2D);\n\t        gl.bindTexture(gl.TEXTURE_2D, null);\n\t\n\t        _this.program = _this.initShader(gl);\n\t\n\t        _this.lifetime = 0;\n\t\n\t        _this.dot = new Float32Array([0.5, 0.5, 30.0, .5]); // x, y, radius, trail\n\t        return _this;\n\t    }\n\t\n\t    _createClass(LayerImage, [{\n\t        key: 'initShader',\n\t        value: function initShader(gl) {\n\t\n\t            // load and compile the fragment and vertex shader\n\t            var fragmentShader = _get(Object.getPrototypeOf(LayerImage.prototype), 'createShader', this).call(this, FRAGMENT, gl.FRAGMENT_SHADER);\n\t            var vertexShader = _get(Object.getPrototypeOf(LayerImage.prototype), 'createShader', this).call(this, VERTEX, gl.VERTEX_SHADER);\n\t\n\t            // link them together into a new program\n\t            this.program = gl.createProgram();\n\t            gl.attachShader(this.program, vertexShader);\n\t            gl.attachShader(this.program, fragmentShader);\n\t            gl.linkProgram(this.program);\n\t\n\t            // get pointers to the shader params\n\t            this.shaderVertexPositionAttribute = gl.getAttribLocation(this.program, 'vertexPosition');\n\t            gl.enableVertexAttribArray(this.shaderVertexPositionAttribute);\n\t\n\t            if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n\t                console.error('[LayerBall] Could not initialize shaders');\n\t            }\n\t\n\t            return this.program;\n\t        }\n\t    }, {\n\t        key: 'render',\n\t        value: function render(elapsedTime) {\n\t\n\t            var gl = this.gl;\n\t\n\t            // set the vertex buffer to be drawn\n\t            gl.bindBuffer(gl.ARRAY_BUFFER, this.geometry.buffer);\n\t\n\t            // set the shader\n\t            gl.useProgram(this.program);\n\t\n\t            // bind comon attributes and uniforms\n\t            gl.vertexAttribPointer(this.shaderVertexPositionAttribute, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n\t\n\t            gl.activeTexture(gl.TEXTURE0);\n\t            gl.bindTexture(gl.TEXTURE_2D, this.texture);\n\t            gl.uniform1i(this.program.samplerUniform, 0);\n\t\n\t            // draw\n\t            gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\t        }\n\t    }]);\n\t\n\t    return LayerImage;\n\t}(_Layer3.default);\n\t\n\texports.default = LayerImage;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _Layer2 = __webpack_require__(2);\n\t\n\tvar _Layer3 = _interopRequireDefault(_Layer2);\n\t\n\tvar _Stage = __webpack_require__(1);\n\t\n\tvar _Stage2 = _interopRequireDefault(_Stage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar FRAGMENT = '\\n\\n    precision mediump float;\\n\\n    varying vec2 uv;\\n\\n    uniform vec4 dot;\\n    \\n    void main() {\\n        vec4 color = vec4(0.0);\\n        float radius = dot.z; // get the radius from dot[2]\\n        vec2 pixelRatio = vec2(1.0, 1.0) / vec2(512.0, 512.0) * radius;\\n        float b = ( 1.0 - length( ( dot.xy - uv ) / pixelRatio ) );\\n        if ( b < .1 ) b = .0; \\n        color.r = b;\\n        color.g = b;\\n        color.b = 0.0;\\n        color.a = b;\\n        gl_FragColor = color;\\n    }\\n';\n\t\n\tvar VERTEX = '\\n    \\n    precision mediump float;\\n\\n    const vec2 mid=vec2(0.5,0.5);\\n    attribute vec2 vertexPosition;\\n    varying vec2 uv;\\n    \\n    void main() {\\n       uv = vertexPosition.xy * mid + mid; // scale vertex attribute to [0-1] range\\n       gl_Position = vec4(vertexPosition.xy,0.0,1.0);\\n    }\\n    \\n';\n\t\n\tvar LayerSimpleBall = function (_Layer) {\n\t    _inherits(LayerSimpleBall, _Layer);\n\t\n\t    function LayerSimpleBall(gl) {\n\t        _classCallCheck(this, LayerSimpleBall);\n\t\n\t        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(LayerSimpleBall).call(this, gl));\n\t\n\t        _this.program = _this.initShader(gl);\n\t\n\t        _this.lifetime = 0;\n\t\n\t        _this.dot = new Float32Array([0.5, 0.5, 30.0, .5]); // x, y, radius, trail\n\t        return _this;\n\t    }\n\t\n\t    _createClass(LayerSimpleBall, [{\n\t        key: 'initShader',\n\t        value: function initShader(gl) {\n\t\n\t            // load and compile the fragment and vertex shader\n\t            var fragmentShader = _get(Object.getPrototypeOf(LayerSimpleBall.prototype), 'createShader', this).call(this, FRAGMENT, gl.FRAGMENT_SHADER);\n\t            var vertexShader = _get(Object.getPrototypeOf(LayerSimpleBall.prototype), 'createShader', this).call(this, VERTEX, gl.VERTEX_SHADER);\n\t\n\t            // link them together into a new program\n\t            this.program = gl.createProgram();\n\t            gl.attachShader(this.program, vertexShader);\n\t            gl.attachShader(this.program, fragmentShader);\n\t            gl.linkProgram(this.program);\n\t\n\t            // get pointers to the shader params\n\t            this.shaderVertexPositionAttribute = gl.getAttribLocation(this.program, 'vertexPosition');\n\t            gl.enableVertexAttribArray(this.shaderVertexPositionAttribute);\n\t\n\t            if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n\t                console.error('[LayerBall] Could not initialize shaders');\n\t            }\n\t\n\t            return this.program;\n\t        }\n\t    }, {\n\t        key: 'render',\n\t        value: function render(elapsedTime) {\n\t\n\t            this.lifetime += elapsedTime;\n\t\n\t            var gl = this.gl;\n\t\n\t            // set the vertex buffer to be drawn\n\t            gl.bindBuffer(gl.ARRAY_BUFFER, this.geometry.buffer);\n\t\n\t            // set the shader\n\t            gl.useProgram(this.program);\n\t\n\t            // bind comon attributes and uniforms\n\t            gl.vertexAttribPointer(this.shaderVertexPositionAttribute, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n\t\n\t            // bind updated ball properties\n\t            gl.uniform4fv(gl.getUniformLocation(this.program, \"dot\"), this.dot);\n\t\n\t            // draw\n\t            gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\t        }\n\t    }, {\n\t        key: 'x',\n\t        set: function set(x) {\n\t            this.dot[0] = x;\n\t        },\n\t        get: function get() {\n\t            return this.dot[0];\n\t        }\n\t    }, {\n\t        key: 'y',\n\t        set: function set(y) {\n\t            this.dot[1] = y;\n\t        },\n\t        get: function get() {\n\t            return this.dot[1];\n\t        }\n\t    }, {\n\t        key: 'radius',\n\t        set: function set(radius) {\n\t            this.dot[2] = radius;\n\t        }\n\t    }, {\n\t        key: 'trail',\n\t        set: function set(trail) {\n\t            this.dot[3] = trail;\n\t        }\n\t    }]);\n\t\n\t    return LayerSimpleBall;\n\t}(_Layer3.default);\n\t\n\texports.default = LayerSimpleBall;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _Layer2 = __webpack_require__(2);\n\t\n\tvar _Layer3 = _interopRequireDefault(_Layer2);\n\t\n\tvar _Stage = __webpack_require__(1);\n\t\n\tvar _Stage2 = _interopRequireDefault(_Stage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar FRAGMENT = '\\n\\n    precision mediump float;\\n\\n    varying vec4 vColor;\\n\\n    void main() {\\n        gl_FragColor = vColor;\\n        gl_FragColor.a *= 1.0 - smoothstep( 0.45, 0.5, distance( gl_PointCoord, vec2(0.5)));\\n    }\\n';\n\t\n\tvar VERTEX = '\\n    \\n    precision mediump float;\\n\\n    uniform mat4 transform;\\n\\n    attribute vec4 uv;\\n    attribute vec4 color;\\n    attribute float size;\\n    \\n    varying vec4 vColor;\\n\\n    void main() {\\n        // Set the size of the point\\n        gl_PointSize = size;\\n\\n        // multiply each vertex by a matrix.\\n        gl_Position = transform * uv;\\n\\n        // pass the color to the fragment shader\\n        vColor = color;\\n    }\\n\\n';\n\t\n\tvar ParticleSystem = function (_Layer) {\n\t    _inherits(ParticleSystem, _Layer);\n\t\n\t    function ParticleSystem(gl, poolSize, settings) {\n\t        _classCallCheck(this, ParticleSystem);\n\t\n\t        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(ParticleSystem).call(this, gl));\n\t\n\t        _this.poolSize = poolSize || 1;\n\t        _this.current = 0;\n\t\n\t        _this.settings = {\n\t            velocity: {\n\t                x: 1,\n\t                y: 0\n\t            },\n\t            attenuation: 1,\n\t            size: 10,\n\t            rgba: [1, 1, 1, 1]\n\t        };\n\t        _this.settings = Object.assign(_this.settings, settings);\n\t\n\t        _this.colors = new Float32Array(_this.poolSize * 4);\n\t        _this.positions = new Float32Array(_this.poolSize * 2);\n\t        _this.sizes = new Float32Array(_this.poolSize);\n\t\n\t        for (var i = 0, i2 = 0, i4 = 0; i < _this.poolSize; i++, i2 += 2, i4 += 4) {\n\t            // this.colors[i4]   = this.settings.rgba[0]; // red\n\t            // this.colors[i4+1] = this.settings.rgba[1]; // green\n\t            // this.colors[i4+2] = this.settings.rgba[2]; // blue\n\t            // this.colors[i4+3] = this.settings.rgba[3]; // alpha\n\t            // this.positions[i2] = .5;   // x\n\t            // this.positions[i2+1] = .5; // y\n\t            // this.sizes[i] = this.settings.size;\n\t\n\t            _this.colors[i4] = 0; // red\n\t            _this.colors[i4 + 1] = 0; // green\n\t            _this.colors[i4 + 2] = 0; // blue\n\t            _this.colors[i4 + 3] = 0; // alpha\n\t            _this.positions[i2] = 0; // x\n\t            _this.positions[i2 + 1] = 0; // y\n\t            _this.sizes[i] = 10;\n\t        }\n\t\n\t        _this.colorsBuffer = gl.createBuffer();\n\t        gl.bindBuffer(gl.ARRAY_BUFFER, _this.colorsBuffer);\n\t        gl.bufferData(gl.ARRAY_BUFFER, _this.colors, gl.STATIC_DRAW);\n\t\n\t        _this.positionsBuffer = gl.createBuffer();\n\t        gl.bindBuffer(gl.ARRAY_BUFFER, _this.positionsBuffer);\n\t        gl.bufferData(gl.ARRAY_BUFFER, _this.positions, gl.STATIC_DRAW);\n\t\n\t        _this.sizesBuffer = gl.createBuffer();\n\t        gl.bindBuffer(gl.ARRAY_BUFFER, _this.sizesBuffer);\n\t        gl.bufferData(gl.ARRAY_BUFFER, _this.sizes, gl.STATIC_DRAW);\n\t\n\t        _this.transform = [2, 0, 0, 0, 0, 2, 0, 0, 0, 0, 1, 0, -1, -1, 0, 1];\n\t\n\t        _this.program = _this.initShader(gl);\n\t\n\t        _this.lifetime = 0;\n\t\n\t        return _this;\n\t    }\n\t\n\t    _createClass(ParticleSystem, [{\n\t        key: 'initShader',\n\t        value: function initShader(gl) {\n\t\n\t            // load and compile the fragment and vertex shader\n\t            var fragmentShader = _get(Object.getPrototypeOf(ParticleSystem.prototype), 'createShader', this).call(this, FRAGMENT, gl.FRAGMENT_SHADER);\n\t            var vertexShader = _get(Object.getPrototypeOf(ParticleSystem.prototype), 'createShader', this).call(this, VERTEX, gl.VERTEX_SHADER);\n\t\n\t            // link them together into a new program\n\t            this.program = gl.createProgram();\n\t            gl.attachShader(this.program, vertexShader);\n\t            gl.attachShader(this.program, fragmentShader);\n\t            gl.linkProgram(this.program);\n\t\n\t            this.locations = {\n\t                transform: gl.getUniformLocation(this.program, 'transform'),\n\t                color: gl.getAttribLocation(this.program, 'color'),\n\t                uv: gl.getAttribLocation(this.program, 'uv'),\n\t                size: gl.getAttribLocation(this.program, 'size')\n\t            };\n\t\n\t            if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n\t                console.error('[LayerBall] Could not initialize shaders');\n\t            }\n\t\n\t            return this.program;\n\t        }\n\t    }, {\n\t        key: 'updateParticles',\n\t        value: function updateParticles(elapsedTime) {\n\t            for (var i = 0, i2 = 0, i4 = 0; i < this.poolSize; i++, i2 += 2, i4 += 4) {\n\t\n\t                this.positions[i2] += elapsedTime * this.settings.velocity.x;\n\t                this.positions[i2 + 1] += elapsedTime * this.settings.velocity.y;\n\t\n\t                this.colors[i4 + 3] -= elapsedTime * .9;\n\t                this.sizes[i] -= elapsedTime * 15;\n\t            }\n\t            this.needsUpdate = true;\n\t        }\n\t    }, {\n\t        key: 'render',\n\t        value: function render(elapsedTime) {\n\t\n\t            this.lifetime += elapsedTime;\n\t\n\t            this.updateParticles(elapsedTime);\n\t\n\t            var gl = this.gl;\n\t\n\t            // set the vertex buffer to be drawn\n\t            gl.bindBuffer(gl.ARRAY_BUFFER, this.geometry.buffer);\n\t\n\t            // set the shader\n\t            gl.useProgram(this.program);\n\t\n\t            // set the transform\n\t            gl.uniformMatrix4fv(this.locations.transform, false, this.transform);\n\t\n\t            if (this.needsUpdate) {\n\t                gl.bindBuffer(gl.ARRAY_BUFFER, this.colorsBuffer);\n\t                gl.bufferData(gl.ARRAY_BUFFER, this.colors, gl.STATIC_DRAW);\n\t\n\t                gl.bindBuffer(gl.ARRAY_BUFFER, this.positionsBuffer);\n\t                gl.bufferData(gl.ARRAY_BUFFER, this.positions, gl.STATIC_DRAW);\n\t\n\t                gl.bindBuffer(gl.ARRAY_BUFFER, this.sizesBuffer);\n\t                gl.bufferData(gl.ARRAY_BUFFER, this.sizes, gl.STATIC_DRAW);\n\t            }\n\t\n\t            // Tell the shader how to get data out of the buffers.\n\t            gl.bindBuffer(gl.ARRAY_BUFFER, this.colorsBuffer);\n\t            gl.vertexAttribPointer(this.locations.color, 4, gl.FLOAT, false, 0, 0);\n\t            gl.enableVertexAttribArray(this.locations.color);\n\t\n\t            gl.bindBuffer(gl.ARRAY_BUFFER, this.positionsBuffer);\n\t            gl.vertexAttribPointer(this.locations.uv, 2, gl.FLOAT, false, 0, 0);\n\t            gl.enableVertexAttribArray(this.locations.uv);\n\t\n\t            gl.bindBuffer(gl.ARRAY_BUFFER, this.sizesBuffer);\n\t            gl.vertexAttribPointer(this.locations.size, 1, gl.FLOAT, false, 0, 0);\n\t            gl.enableVertexAttribArray(this.locations.size);\n\t\n\t            gl.drawArrays(gl.POINTS, 0, this.poolSize);\n\t        }\n\t    }, {\n\t        key: 'spawn',\n\t        value: function spawn(x, y, size, r, g, b, a) {\n\t\n\t            this.positions[this.current * 2] = x;\n\t            this.positions[this.current * 2 + 1] = y;\n\t\n\t            this.colors[this.current * 4] = r;\n\t            this.colors[this.current * 4 + 1] = g;\n\t            this.colors[this.current * 4 + 2] = b;\n\t            this.colors[this.current * 4 + 3] = a;\n\t\n\t            this.sizes[this.current] = size;\n\t\n\t            this.needsUpdate = true;\n\t\n\t            if (++this.current > this.poolSize - 1) this.current = 0;\n\t        }\n\t    }]);\n\t\n\t    return ParticleSystem;\n\t}(_Layer3.default);\n\t\n\texports.default = ParticleSystem;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Clock = function () {\n\t    function Clock() {\n\t        _classCallCheck(this, Clock);\n\t\n\t        this.timeBefore = Date.now();\n\t        this.lifeTime = 0;\n\t        this.elapsedTime = 0;\n\t    }\n\t\n\t    _createClass(Clock, [{\n\t        key: \"tick\",\n\t        value: function tick() {\n\t            this.elapsedTime = Date.now() - this.timeBefore;\n\t            this.timeBefore = Date.now();\n\t            this.lifeTime += this.elapsedTime;\n\t            return this.elapsedTime / 1000;\n\t        }\n\t    }]);\n\t\n\t    return Clock;\n\t}();\n\t\n\texports.default = Clock;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(module) {'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\t/**\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author mr.doob / http://mrdoob.com/\n\t */\n\t\n\tvar Detector = {\n\t\n\t\tcanvas: !!window.CanvasRenderingContext2D,\n\t\twebgl: function () {\n\t\n\t\t\ttry {\n\t\n\t\t\t\tvar canvas = document.createElement('canvas');return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\n\t\t\t} catch (e) {\n\t\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}(),\n\t\tworkers: !!window.Worker,\n\t\tfileapi: window.File && window.FileReader && window.FileList && window.Blob,\n\t\n\t\tgetWebGLErrorMessage: function getWebGLErrorMessage() {\n\t\n\t\t\tvar element = document.createElement('div');\n\t\t\telement.id = 'webgl-error-message';\n\t\t\telement.style.fontFamily = 'monospace';\n\t\t\telement.style.fontSize = '13px';\n\t\t\telement.style.fontWeight = 'normal';\n\t\t\telement.style.textAlign = 'center';\n\t\t\telement.style.background = '#fff';\n\t\t\telement.style.color = '#000';\n\t\t\telement.style.padding = '1.5em';\n\t\t\telement.style.width = '400px';\n\t\t\telement.style.margin = '5em auto 0';\n\t\n\t\t\tif (!this.webgl) {\n\t\n\t\t\t\telement.innerHTML = window.WebGLRenderingContext ? ['Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />', 'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'].join('\\n') : ['Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>', 'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'].join('\\n');\n\t\t\t}\n\t\n\t\t\treturn element;\n\t\t},\n\t\n\t\taddGetWebGLMessage: function addGetWebGLMessage(parameters) {\n\t\n\t\t\tvar parent, id, element;\n\t\n\t\t\tparameters = parameters || {};\n\t\n\t\t\tparent = parameters.parent !== undefined ? parameters.parent : document.body;\n\t\t\tid = parameters.id !== undefined ? parameters.id : 'oldie';\n\t\n\t\t\telement = Detector.getWebGLErrorMessage();\n\t\t\telement.id = id;\n\t\n\t\t\tparent.appendChild(element);\n\t\t}\n\t\n\t};\n\t\n\t// browserify support\n\tif (( false ? 'undefined' : _typeof(module)) === 'object') {\n\t\n\t\tmodule.exports = Detector;\n\t}\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)(module)))\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(module) {\"use strict\";\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\t// stats.js - http://github.com/mrdoob/stats.js\n\tvar Stats = function Stats() {\n\t  function f(a, e, b) {\n\t    a = document.createElement(a);a.id = e;a.style.cssText = b;return a;\n\t  }function l(a, e, b) {\n\t    var c = f(\"div\", a, \"padding:0 0 3px 3px;text-align:left;background:\" + b),\n\t        d = f(\"div\", a + \"Text\", \"font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:\" + e);d.innerHTML = a.toUpperCase();c.appendChild(d);a = f(\"div\", a + \"Graph\", \"width:74px;height:30px;background:\" + e);c.appendChild(a);for (e = 0; 74 > e; e++) {\n\t      a.appendChild(f(\"span\", \"\", \"width:1px;height:30px;float:left;opacity:0.9;background:\" + b));\n\t    }return c;\n\t  }function m(a) {\n\t    for (var b = c.children, d = 0; d < b.length; d++) {\n\t      b[d].style.display = d === a ? \"block\" : \"none\";\n\t    }n = a;\n\t  }function p(a, b) {\n\t    a.appendChild(a.firstChild).style.height = Math.min(30, 30 - 30 * b) + \"px\";\n\t  }var q = self.performance && self.performance.now ? self.performance.now.bind(performance) : Date.now,\n\t      k = q(),\n\t      r = k,\n\t      t = 0,\n\t      n = 0,\n\t      c = f(\"div\", \"stats\", \"width:80px;opacity:0.9;cursor:pointer\");c.addEventListener(\"mousedown\", function (a) {\n\t    a.preventDefault();m(++n % c.children.length);\n\t  }, !1);var d = 0,\n\t      u = Infinity,\n\t      v = 0,\n\t      b = l(\"fps\", \"#0ff\", \"#002\"),\n\t      A = b.children[0],\n\t      B = b.children[1];c.appendChild(b);var g = 0,\n\t      w = Infinity,\n\t      x = 0,\n\t      b = l(\"ms\", \"#0f0\", \"#020\"),\n\t      C = b.children[0],\n\t      D = b.children[1];c.appendChild(b);if (self.performance && self.performance.memory) {\n\t    var h = 0,\n\t        y = Infinity,\n\t        z = 0,\n\t        b = l(\"mb\", \"#f08\", \"#201\"),\n\t        E = b.children[0],\n\t        F = b.children[1];c.appendChild(b);\n\t  }m(n);return { REVISION: 14, domElement: c, setMode: m, begin: function begin() {\n\t      k = q();\n\t    }, end: function end() {\n\t      var a = q();g = a - k;w = Math.min(w, g);x = Math.max(x, g);C.textContent = (g | 0) + \" MS (\" + (w | 0) + \"-\" + (x | 0) + \")\";p(D, g / 200);t++;if (a > r + 1E3 && (d = Math.round(1E3 * t / (a - r)), u = Math.min(u, d), v = Math.max(v, d), A.textContent = d + \" FPS (\" + u + \"-\" + v + \")\", p(B, d / 100), r = a, t = 0, void 0 !== h)) {\n\t        var b = performance.memory.usedJSHeapSize,\n\t            c = performance.memory.jsHeapSizeLimit;h = Math.round(9.54E-7 * b);y = Math.min(y, h);z = Math.max(z, h);E.textContent = h + \" MB (\" + y + \"-\" + z + \")\";p(F, b / c);\n\t      }return a;\n\t    }, update: function update() {\n\t      k = this.end();\n\t    } };\n\t};\"object\" === ( false ? \"undefined\" : _typeof(module)) && (module.exports = Stats);\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)(module)))\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** bundle.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap daaaa73029528a3e85a1\n **/","\"use strict\";\n\nimport Renderer      from './Renderer';\nimport Clock         from '../utils/Clock';\n\nconst singletonEnforcer = Symbol();\nlet instance = Symbol();\n\nexport default class Stage {\n\n    static initialize ( canvas, options ) {\n        \n        if (this[instance]) {\n            throw '[Stage] Already initialized.';\n        }\n\n        this[instance] = new Stage(singletonEnforcer, canvas, options);\n        return this[instance];\n\n    }\n    \n    static getInstance () {\n\n        if (!this[instance]) {\n           throw '[Stage] Must first call `Stage.initialize(canvas, options)`.';\n        }\n        return this[instance];\n\n    }\n\n    static getRenderer () {\n        return Stage.getInstance().renderer;\n    }\n\n    static getGL () {\n        return Stage.getInstance().renderer.gl;\n    }\n\n    static addLayer ( layer ) { \n        Stage.getInstance().addLayer( layer ); \n    }\n\n    static removeLayer ( layer ) { \n        Stage.getInstance().removeLayer( layer ); \n    }\n    \n    static setLayerIndex ( layer, index ) {\n        Stage.getInstance().setLayerIndex( layer, index );         \n    }\n\n    static beforeUpdateHandler ( callback ) {\n        Stage.getInstance().beforeUpdateHandler = callback;   \n    }\n\n    static afterUpdateHandler ( callback ) {\n        Stage.getInstance().afterUpdateHandler = callback;   \n    }\n\n    constructor (enforcer, canvas, options) {\n\n        if (enforcer !== singletonEnforcer) {\n            throw '[Stage] Singleton class, use `Stage.getInstance()` instead.';\n        }\n\n        this.clock = new Clock();\n\n        this.layers = [];\n\n        this.renderer = new Renderer( canvas, options );\n\n        this.update();\n\n        console.log('[Stage] initialized.');\n\n    }\n    \n    update() {    \n        \n        window.requestAnimationFrame( this.update.bind(this) );\n\n        let elapsedTime = this.clock.tick();\n\n        if ( this.beforeUpdateHandler ) this.beforeUpdateHandler( elapsedTime );\n\n        this.renderer.clear();\n\n        for ( let layer of this.layers ) layer.render(elapsedTime);\n\n        if ( this.afterUpdateHandler ) this.afterUpdateHandler( elapsedTime );\n    }\n\n    addLayer ( layer ) {\n        this.layers.push( layer );\n    }\n\n    removeLayer ( layer ) { \n        console.log('[Stage] TO DO: implement removeLayer.');\n    }\n\n    setLayerIndex ( layer, index ) { \n        console.log('[Stage] TO DO: implement setLayerIndex.');\n    }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/Stage.js\n **/","\"use strict\";\n\n\nconst DEFAULT_FRAGMENT = `\n    void main(void) {\n        gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0); // default debug purple\n    }\n`;\n\nconst DEFAULT_VERTEX = `\n    attribute vec3 vertexPos;\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n    void main(void) {\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPos, 1.0);\n    }\n`;\n\n\nexport default class Layer {\n    constructor(gl) {\n        \n        this.gl = gl;\n\n        this.geometry = this.getDefaultGeometry( gl );\n\n        if (this.render === undefined) \n            throw new TypeError(\"Must override method 'render'.\");\n\n        console.log('[Layer] initialized.');\n\n    }\n\n    getDefaultGeometry (gl) {\n\n        let vertexBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n        var verts = new Float32Array([\n             1.0,  1.0,  0.0,\n            -1.0,  1.0,  0.0,\n             1.0, -1.0,  0.0,\n            -1.0, -1.0,  0.0\n        ]);\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verts), gl.STATIC_DRAW);\n        let geometry = {buffer:vertexBuffer, vertSize:3, nVerts:4, primtype:gl.TRIANGLE_STRIP};\n        return geometry;\n    }\n\n    getDefaultFragment () { \n        return DEFAULT_FRAGMENT; \n    }\n    \n    getDefaultVertex () { \n        return DEFAULT_VERTEX; \n    }\n    \n    createShader (str, type) {\n        let shader = this.gl.createShader(type);\n        this.gl.shaderSource(shader, str);\n        this.gl.compileShader(shader);\n        if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\n            console.error( '[Layer] ', this.gl.getShaderInfoLog(shader));\n            return null;\n        }\n        return shader;\n    }\n\n    update ( elapsedTime ) {\n        console.warn('Implement update() method for', this);\n    }\n    \n    render (  ) {\n        console.warn('Implement render() method for', this);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/layers/Layer.js\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 3\n ** module chunks = 0\n **/","\"use strict\";\n\nimport Stage            from './core/Stage';\nimport LayerSimpleBall  from './layers/LayerSimpleBall';\nimport LayerBallTrail   from './layers/LayerBallTrail';\nimport LayerImage       from './layers/LayerImage';\nimport ParticleSystem   from './layers/ParticleSystem';\nimport Stats            from './vendors/Stats.min';\n\nexport default class Game {\n\n    constructor(options) {\n        let image = new Image();\n        image.onload = () => this.init( image ); \n        image.src = 'assets/img/field.png';\n\n    }\n\n    init (bgImg) {\n\n        Stage.initialize(document.getElementById('canvas'), {\n            contain: true\n        });\n\n        // this.bg = new LayerImage( Stage.getGL(), bgImg );\n        // Stage.addLayer( this.bg );\n\n        this.particleSystem = new ParticleSystem( Stage.getGL(), 1000, { \n            velocity: { \n                x:0.4, \n                y:1\n            }, \n            attenuation: 30,\n            size: 40,\n            rgba: [1,1,1,1]\n        });\n        Stage.addLayer( this.particleSystem );\n\n        this.ball = new LayerSimpleBall( Stage.getGL() );\n        this.ball.radius = 25.0;\n        Stage.addLayer( this.ball );\n\n        this.trailBall = new LayerBallTrail( Stage.getGL(), 20, .01 );\n        this.trailBall.speedX = 2;\n        this.trailBall.speedY = 3;\n        Stage.addLayer( this.trailBall );\n\n        Stage.beforeUpdateHandler( this.update.bind(this) );\n        Stage.afterUpdateHandler( null );\n\n        this.lifetime = 0;\n\n        this.stats = new Stats();\n        \n        let container = document.getElementById( 'container' );\n        container.appendChild( this.stats.domElement );\n        \n        document.addEventListener( 'mousedown', this.onDocumentMouseDown.bind(this), false );\n\n    }\n\n    onDocumentMouseDown( event ) {\n\n        event.preventDefault();\n\n    }\n\n    update( elapsedTime ) {\n    \n        this.lifetime += elapsedTime;\n\n        this.ball.x = (Math.sin(this.lifetime*3)+1)/2*.8+.1;\n        this.ball.y = (Math.sin(this.lifetime*2.6)+1)/2*.8+.1;\n\n        this.trailBall.x = (Math.sin(this.lifetime*this.trailBall.speedX)+1)/2*.8+.1;\n        this.trailBall.y = (Math.sin(this.lifetime*this.trailBall.speedY)+1)/2*.8+.1;\n\n        this.particleSystem.spawn( \n            this.ball.x - .005 + Math.random()*0.01,\n            this.ball.y - .005 + Math.random()*0.01,\n            30 * Math.random(),\n            Math.random(), Math.random(), Math.random(), Math.random()\n        );\n\n        this.particleSystem.spawn( \n            this.trailBall.x - .05 + Math.random()*0.1,\n            this.trailBall.y - .05 + Math.random()*0.1,\n            60 * Math.random(),\n            Math.random(), Math.random(), Math.random(), Math.random()\n        );\n\n        this.stats.update();\n\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/Game.js\n **/","'use strict';\n\nimport '../sass/main.scss';\n\nimport Detector from './vendors/Detector';\n\nimport Game from './Game';\n\nif ( ! Detector.webgl ) Detector.addGetWebGLMessage();\n\nwindow.addEventListener('load', function () {\n    let game = new Game({});\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/Main.js\n **/","\"use strict\";\n\nexport default class Renderer {\n\n    constructor ( canvas, options ) {\n\n        this.canvas = canvas;\n\n        options = options || {};\n        this.contain = options.hasOwnProperty('contain') ? options.contain : true;\n\n        this.gl = this.initWebGL( canvas );\n        this.initViewport( this.gl, canvas );\n\n        window.addEventListener( 'resize', this.onWindowResize.bind(this), false );\n        this.onWindowResize();\n        \n        console.log('[Renderer] initialized.');\n\n    }\n\n    initWebGL (canvas) {\n        let gl;\n        try {\n            gl = this.canvas.getContext('webgl', {\n                alpha: true,\n                // depth: true,\n                // stencil:true,\n                antialias: true,\n                // premultipliedAlpha: true,\n                preserveDrawingBuffer: true ,\n                // failIfMajorPerformanceCaveat: true \n            });\n        } catch (e) {\n            var msg = \"Error creating WebGL Context!: \" + e.toString();\n            alert(msg);\n            throw Error(msg);\n        }\n        return gl;        \n    }\n\n    initViewport (gl, canvas) {\n        gl.viewport(0, 0, canvas.width, canvas.height);\n    }\n\n    clear () {\n\n        this.gl.bindTexture( this.gl.TEXTURE_2D, null );\n        this.gl.bindRenderbuffer( this.gl.RENDERBUFFER, null );\n        this.gl.bindFramebuffer( this.gl.FRAMEBUFFER, null );\n\n        this.gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n\n        this.gl.enable(this.gl.BLEND);\n        this.gl.disable(this.gl.DEPTH_TEST);\n        this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE);\n\n    }\n\n    onWindowResize() {\n\n        let scale = 1/(this.contain?Math.max:Math.min)( this.canvas.width/window.innerWidth, this.canvas.height/window.innerHeight );\n        canvas.style.transformOrigin = 'top left';\n        canvas.style.left = ( ( window.innerWidth - this.canvas.width*scale) / 2 ).toFixed(2) + 'px';\n        canvas.style.top = ( ( window.innerHeight - this.canvas.height*scale) / 2 ).toFixed(2) + 'px';\n        canvas.style.transform = 'scale('+scale.toFixed(2)+')';\n\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/Renderer.js\n **/","\"use strict\";\n\nimport Layer from './Layer';\nimport Stage from './../core/Stage';\n\nconst FRAGMENT_BALL = `\n\n    precision mediump float;\n\n    varying vec2 uv;\n\n    uniform vec4 dot;\n    \n    void main() {\n        vec4 color = vec4(0.0);\n        float radius = 1.0 / 512.0 * dot.z;\n        float b = ( 1.0 - length( ( dot.xy - uv ) / radius ) );\n        color.r = b;\n        color.g = b*.4;\n        color.b = b;\n        color.a = b;\n        gl_FragColor = color;\n    }\n`;\n\nconst FRAGMENT_MERGE = `\n\n    precision mediump float;\n\n    varying vec2 uv;\n\n    uniform sampler2D ball;\n    uniform sampler2D previous;\n\n    void main() { \n\n        vec4 colorBall = texture2D(ball, uv);\n        vec4 colorPrevious = texture2D(previous, uv);\n\n        gl_FragColor = vec4(0.0);\n        gl_FragColor.a = colorBall.a + colorPrevious.a;\n\n        gl_FragColor.r = gl_FragColor.a;\n        gl_FragColor.g = gl_FragColor.a*.4;\n        gl_FragColor.b = gl_FragColor.a;\n\n    }\n`;\n\nfunction getFragmentPreviousFrame (trail) {\n    return `\n\n    precision mediump float;\n\n    varying vec2 uv;\n\n    uniform sampler2D previous;\n\n    const float trail = ${trail}; \n    const float blur = 0.125;\n    const float weight = .88;\n    \n    void main() { \n        \n        vec2 onePixel = vec2(1.0, 1.0) / vec2(512., 512.);\n        vec4 color = texture2D(previous, uv + onePixel * vec2(-1, -1)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 0, -1)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 1, -1)) * blur +\n        texture2D(previous, uv + onePixel * vec2(-1,  0)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 0,  0)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 1,  0)) * blur +\n        texture2D(previous, uv + onePixel * vec2(-1,  1)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 0,  1)) * blur +\n        texture2D(previous, uv + onePixel * vec2( 1,  1)) * blur ;\n        color *= weight;\n        \n        gl_FragColor = color;\n        gl_FragColor.a -= trail;\n\n        if ( gl_FragColor.a < 0.2 ) gl_FragColor = vec4(0.0);\n        // if ( gl_FragColor.a < 0.101 && gl_FragColor.a > 0.1 ) gl_FragColor = vec4(0.101/ gl_FragColor.a, .101/ gl_FragColor.a, .101/ gl_FragColor.a, .101/ gl_FragColor.a);\n        // if ( gl_FragColor.a < 0.101 && gl_FragColor.a > 0.1 ) gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n    }\n`;\n}\n\nconst VERTEX = `\n    \n    precision mediump float;\n\n    const vec2 mid=vec2(0.5,0.5);\n    attribute vec2 vertexPosition;\n    varying vec2 uv;\n    \n    void main() {\n       uv = vertexPosition.xy * mid + mid; // scale vertex attribute to [0-1] range\n       gl_Position = vec4(vertexPosition.xy,0.0,1.0);\n    }\n\n`;\n\nexport default class LayerSimpleBall extends Layer {\n\n    constructor (gl, radius, trail) {\n        \n        super(gl);\n\n        this.lifetime = 0;\n\n        this.dot = new Float32Array([0.5, 0.5, radius, trail]); // x, y, radius, trail\n\n        /** Render pipeline *********************************\n          *     coordinates             >> BallRTT          *\n          *     PreviousRTT + BallRTT   >> MergeRTT         *\n          *     MergeRTT                >> previousRTT      *\n          *     MergeRTT                >> SCREEN           *\n          ***************************************************/\n\n        /** Buffers **/\n        this.initTextureBuffers( gl );\n\n        /** Ball **/\n        this.pointersBall = this.initShaderBall( gl );        \n\n        /** Merge **/\n        this.pointersMerge = this.initShaderMerge( gl );       \n        \n        /** Previous **/\n        this.pointersPreviousFrame = this.initShaderPreviousFrame( gl );       \n        \n    }\n\n    initTextureBuffers (gl) {\n\n        this.ballRTT = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, this.ballRTT);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n        gl.texImage2D(this.gl.TEXTURE_2D, 0, gl.RGBA, 512, 512, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.generateMipmap(gl.TEXTURE_2D);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        this.ballFrameBuffer = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.ballFrameBuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.ballRTT, 0);\n        this.ballFrameBuffer.width = 512;\n        this.ballFrameBuffer.height = 512;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n\n        this.previousRTT = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, this.previousRTT);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n        gl.texImage2D(this.gl.TEXTURE_2D, 0, gl.RGBA, 512, 512, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.generateMipmap(gl.TEXTURE_2D);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        this.previousFrameBuffer = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.previousFrameBuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.previousRTT, 0);\n        this.previousFrameBuffer.width = 512;\n        this.previousFrameBuffer.height = 512;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n\n\n        this.mergeRTT = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, this.mergeRTT);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n        gl.texImage2D(this.gl.TEXTURE_2D, 0, gl.RGBA, 512, 512, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.generateMipmap(gl.TEXTURE_2D);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        this.mergeFrameBuffer = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.mergeFrameBuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.mergeRTT, 0);\n        this.mergeFrameBuffer.width = 512;\n        this.mergeFrameBuffer.height = 512;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n    }\n\n    initShaderBall (gl) {\n\n        // load and compile the fragment and vertex shader\n        let fragmentShader = super.createShader( FRAGMENT_BALL, gl.FRAGMENT_SHADER);\n        let vertexShader = super.createShader( VERTEX, gl.VERTEX_SHADER);\n\n        this.programBall = gl.createProgram();\n        gl.attachShader(this.programBall, vertexShader);\n        gl.attachShader(this.programBall, fragmentShader);\n        gl.linkProgram(this.programBall);\n\n        // get pointers to the shader params\n        let pointers = {\n            'vertexPosition': gl.getAttribLocation(this.programBall, 'vertexPosition'),\n            'dot': gl.getUniformLocation(this.programBall, 'dot'),\n        };\n\n        gl.enableVertexAttribArray(pointers.vertexPosition);\n        \n        this.validateProgram( this.programBall );\n\n        return pointers;\n    }\n\n    initShaderMerge (gl) {\n        // load and compile the fragment and vertex shader\n        let fragmentShader = super.createShader( FRAGMENT_MERGE, gl.FRAGMENT_SHADER);\n        let vertexShader = super.createShader( VERTEX, gl.VERTEX_SHADER);\n\n        this.programMerge = gl.createProgram();\n        gl.attachShader(this.programMerge, vertexShader);\n        gl.attachShader(this.programMerge, fragmentShader);\n        gl.linkProgram(this.programMerge);\n\n        // get pointers to the shader params\n        let pointers = {\n            'vertexPosition': gl.getAttribLocation(this.programMerge, 'vertexPosition'),\n            'ball': gl.getUniformLocation(this.programMerge, 'ball'),\n            'previous': gl.getUniformLocation(this.programMerge, 'previous')\n        };\n\n        gl.enableVertexAttribArray(pointers.vertexPosition);\n           \n        this.validateProgram( this.programMerge );\n\n        return pointers;\n    }\n        \n    initShaderPreviousFrame (gl) {\n\n        // load and compile the fragment and vertex shader\n        let fragmentShader = super.createShader( getFragmentPreviousFrame(this.dot[3].toFixed(2)), gl.FRAGMENT_SHADER);\n        let vertexShader = super.createShader( VERTEX, gl.VERTEX_SHADER);\n\n        this.programPreviousFrame = gl.createProgram();\n        gl.attachShader(this.programPreviousFrame, vertexShader);\n        gl.attachShader(this.programPreviousFrame, fragmentShader);\n        gl.linkProgram(this.programPreviousFrame);\n\n\n        // get pointers to the shader params\n        let pointers = {\n            'vertexPosition': gl.getAttribLocation(this.programPreviousFrame, 'vertexPosition'),\n            'previous': gl.getUniformLocation(this.programPreviousFrame, 'previous')\n        };\n\n        gl.enableVertexAttribArray(pointers.vertexPosition);\n           \n        this.validateProgram( this.programPreviousFrame );\n\n        return pointers;\n    }\n\n    validateProgram ( program ) {\n        if (!this.gl.getProgramParameter(program, this.gl.LINK_STATUS)) {\n            console.error( '[LayerBall] Could not initialize shaders' );\n        }\n    }\n    \n    render ( elapsedTime ) {\n   \n        this.lifetime += elapsedTime;\n   \n        let gl = this.gl;\n\n        gl.blendEquation( gl.FUNC_ADD );\n        gl.blendFunc(gl.ONE, gl.DST_ALPHA);\n\n        gl.bindBuffer( gl.ARRAY_BUFFER, this.geometry.buffer );\n\n        /*     coordinates             >> BallRTT          */\n        gl.useProgram( this.programBall );\n        gl.vertexAttribPointer( this.pointersBall.vertexPosition, this.geometry.vertSize, gl.FLOAT, false, 0, 0 );\n        gl.uniform4fv( this.pointersBall.dot, this.dot );  \n        gl.bindFramebuffer( gl.FRAMEBUFFER, this.ballFrameBuffer );\n        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        gl.drawArrays( this.geometry.primtype, 0, this.geometry.nVerts );\n        gl.bindFramebuffer( gl.FRAMEBUFFER, null );\n\n        /*     PreviousRTT + BallRTT   >> MergeRTT         */\n        gl.bindFramebuffer(gl.FRAMEBUFFER,  this.mergeFrameBuffer );\n        \n        gl.useProgram(this.programMerge);\n        gl.vertexAttribPointer(this.pointersMerge.vertexPosition, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n        gl.uniform1i(this.pointersMerge.ball, 0);  // texture unit 0\n        gl.uniform1i(this.pointersMerge.previous, 1);  // texture unit 1\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.ballRTT);\n        gl.activeTexture(gl.TEXTURE1);\n        gl.bindTexture(gl.TEXTURE_2D, this.previousRTT);\n        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n \n        /*     MergeRTT                >> previousRTT      */\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.previousFrameBuffer);        \n        gl.useProgram(this.programPreviousFrame);\n        gl.vertexAttribPointer(this.pointersPreviousFrame.vertexPosition, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n        gl.uniform1i(this.pointersPreviousFrame.previous, 0);\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.mergeRTT);\n        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        gl.drawArrays( this.geometry.primtype, 0, this.geometry.nVerts );\n\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n\n        /*     MergeRTT                >> SCREEN           */\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\n    }\n\n    set x(x) { this.dot[0] = x; }\n    get x() { return this.dot[0]; }\n    \n    set y(y) { this.dot[1] = y; }\n    get y() { return this.dot[1]; }\n\n    set radius(radius) { this.dot[2] = radius; }\n    \n    set trail(trail) { this.dot[3] = trail; }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/layers/LayerBallTrail.js\n **/","\"use strict\";\n\nimport Layer from './Layer';\nimport Stage from './../core/Stage';\n\nconst FRAGMENT = `\n\n    precision mediump float;\n\n    varying vec2 uv;\n    \n    uniform sampler2D image;\n\n    void main() { \n        gl_FragColor = texture2D(image, uv);\n    }\n`;\n\nconst VERTEX = `\n    \n    precision mediump float;\n\n    const vec2 mid=vec2(0.5,0.5);\n    attribute vec2 vertexPosition;\n    varying vec2 uv;\n    \n    void main() {\n       uv = vertexPosition.xy * mid + mid; // scale vertex attribute to [0-1] range\n       gl_Position = vec4(vertexPosition.xy,0.0,1.0);\n    }\n    \n`;\n\n\nexport default class LayerImage extends Layer {\n\n    constructor (gl, img) {\n\n        \n        super(gl);\n\n        this.texture = gl.createTexture();\n        this.img = img;\n        this.ready = true;\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n        gl.generateMipmap(gl.TEXTURE_2D);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n\n        this.program = this.initShader( gl );       \n\n        this.lifetime = 0;\n\n        this.dot = new Float32Array([0.5, 0.5, 30.0, .5]); // x, y, radius, trail\n    }\n\n    initShader (gl) {\n\n        // load and compile the fragment and vertex shader\n        let fragmentShader = super.createShader( FRAGMENT, gl.FRAGMENT_SHADER);\n        let vertexShader = super.createShader( VERTEX, gl.VERTEX_SHADER);\n\n        // link them together into a new program\n        this.program = gl.createProgram();\n        gl.attachShader(this.program, vertexShader);\n        gl.attachShader(this.program, fragmentShader);\n        gl.linkProgram(this.program);\n\n        // get pointers to the shader params\n        this.shaderVertexPositionAttribute = gl.getAttribLocation(this.program, 'vertexPosition');\n        gl.enableVertexAttribArray(this.shaderVertexPositionAttribute);\n\n        if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n            console.error( '[LayerBall] Could not initialize shaders' );\n        }\n\n        return this.program;\n    }\n\n    render ( elapsedTime ) {\n      \n        let gl = this.gl;\n\n        // set the vertex buffer to be drawn\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.geometry.buffer);\n\n        // set the shader\n        gl.useProgram(this.program);\n\n        // bind comon attributes and uniforms\n        gl.vertexAttribPointer(this.shaderVertexPositionAttribute, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n        gl.uniform1i(this.program.samplerUniform, 0);\n    \n        // draw\n        gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/layers/LayerImage.js\n **/","\"use strict\";\n\nimport Layer from './Layer';\nimport Stage from './../core/Stage';\n\nconst FRAGMENT = `\n\n    precision mediump float;\n\n    varying vec2 uv;\n\n    uniform vec4 dot;\n    \n    void main() {\n        vec4 color = vec4(0.0);\n        float radius = dot.z; // get the radius from dot[2]\n        vec2 pixelRatio = vec2(1.0, 1.0) / vec2(512.0, 512.0) * radius;\n        float b = ( 1.0 - length( ( dot.xy - uv ) / pixelRatio ) );\n        if ( b < .1 ) b = .0; \n        color.r = b;\n        color.g = b;\n        color.b = 0.0;\n        color.a = b;\n        gl_FragColor = color;\n    }\n`;\n\nconst VERTEX = `\n    \n    precision mediump float;\n\n    const vec2 mid=vec2(0.5,0.5);\n    attribute vec2 vertexPosition;\n    varying vec2 uv;\n    \n    void main() {\n       uv = vertexPosition.xy * mid + mid; // scale vertex attribute to [0-1] range\n       gl_Position = vec4(vertexPosition.xy,0.0,1.0);\n    }\n    \n`;\n\n\nexport default class LayerSimpleBall extends Layer {\n\n    constructor (gl) {\n        \n        super(gl);\n\n        this.program = this.initShader( gl );       \n\n        this.lifetime = 0;\n\n        this.dot = new Float32Array([0.5, 0.5, 30.0, .5]); // x, y, radius, trail\n    }\n\n    initShader (gl) {\n\n        // load and compile the fragment and vertex shader\n        let fragmentShader = super.createShader( FRAGMENT, gl.FRAGMENT_SHADER);\n        let vertexShader = super.createShader( VERTEX, gl.VERTEX_SHADER);\n\n        // link them together into a new program\n        this.program = gl.createProgram();\n        gl.attachShader(this.program, vertexShader);\n        gl.attachShader(this.program, fragmentShader);\n        gl.linkProgram(this.program);\n\n        // get pointers to the shader params\n        this.shaderVertexPositionAttribute = gl.getAttribLocation(this.program, 'vertexPosition');\n        gl.enableVertexAttribArray(this.shaderVertexPositionAttribute);\n        \n        if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n            console.error( '[LayerBall] Could not initialize shaders' );\n        }\n\n        return this.program;\n    }\n\n    render ( elapsedTime ) {\n   \n        this.lifetime += elapsedTime;\n   \n        let gl = this.gl;\n\n        // set the vertex buffer to be drawn\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.geometry.buffer);\n\n        // set the shader\n        gl.useProgram(this.program);\n\n        // bind comon attributes and uniforms\n        gl.vertexAttribPointer(this.shaderVertexPositionAttribute, this.geometry.vertSize, gl.FLOAT, false, 0, 0);\n\n        // bind updated ball properties\n        gl.uniform4fv(gl.getUniformLocation(this.program, \"dot\"), this.dot);\n\n        // draw\n        gl.drawArrays(this.geometry.primtype, 0, this.geometry.nVerts);\n\n    }\n\n    set x(x) { this.dot[0] = x; }\n    get x() { return this.dot[0]; }\n    \n    set y(y) { this.dot[1] = y; }\n    get y() { return this.dot[1]; }\n\n    set radius(radius) { this.dot[2] = radius; }\n    set trail(trail) { this.dot[3] = trail; }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/layers/LayerSimpleBall.js\n **/","\"use strict\";\n\nimport Layer from './Layer';\nimport Stage from './../core/Stage';\n\nconst FRAGMENT = `\n\n    precision mediump float;\n\n    varying vec4 vColor;\n\n    void main() {\n        gl_FragColor = vColor;\n        gl_FragColor.a *= 1.0 - smoothstep( 0.45, 0.5, distance( gl_PointCoord, vec2(0.5)));\n    }\n`;\n\nconst VERTEX = `\n    \n    precision mediump float;\n\n    uniform mat4 transform;\n\n    attribute vec4 uv;\n    attribute vec4 color;\n    attribute float size;\n    \n    varying vec4 vColor;\n\n    void main() {\n        // Set the size of the point\n        gl_PointSize = size;\n\n        // multiply each vertex by a matrix.\n        gl_Position = transform * uv;\n\n        // pass the color to the fragment shader\n        vColor = color;\n    }\n\n`;\n\n\nexport default class ParticleSystem extends Layer {\n\n    constructor (gl, poolSize, settings) {\n        \n        super(gl);\n\n        this.poolSize = poolSize || 1;\n        this.current = 0;\n\n        this.settings = { \n            velocity: {\n                x:1, \n                y:0\n            }, \n            attenuation: 1,\n            size: 10,\n            rgba: [1,1,1,1]\n        };\n        this.settings = Object.assign( this.settings, settings );\n        \n        this.colors = new Float32Array(this.poolSize*4);\n        this.positions = new Float32Array(this.poolSize*2);\n        this.sizes = new Float32Array(this.poolSize);\n\n        for ( let i=0, i2=0, i4=0; i<this.poolSize; i++, i2+=2, i4+=4 ) {\n            // this.colors[i4]   = this.settings.rgba[0]; // red\n            // this.colors[i4+1] = this.settings.rgba[1]; // green\n            // this.colors[i4+2] = this.settings.rgba[2]; // blue\n            // this.colors[i4+3] = this.settings.rgba[3]; // alpha\n            // this.positions[i2] = .5;   // x\n            // this.positions[i2+1] = .5; // y\n            // this.sizes[i] = this.settings.size;\n\n            this.colors[i4]   = 0; // red\n            this.colors[i4+1] = 0; // green\n            this.colors[i4+2] = 0; // blue\n            this.colors[i4+3] = 0; // alpha\n            this.positions[i2] = 0;   // x\n            this.positions[i2+1] = 0; // y\n            this.sizes[i] = 10;\n        }\n\n        this.colorsBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.colorsBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, this.colors, gl.STATIC_DRAW);\n\n        this.positionsBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.positionsBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, this.positions, gl.STATIC_DRAW);\n        \n        this.sizesBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.sizesBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, this.sizes, gl.STATIC_DRAW);\n\n        this.transform = [\n          2, 0, 0, 0,\n          0, 2, 0, 0,\n          0, 0, 1, 0,\n          -1,-1, 0, 1\n        ];\n\n        this.program = this.initShader( gl );       \n\n        this.lifetime = 0;\n\n    }\n\n    initShader (gl) {\n\n        // load and compile the fragment and vertex shader\n        let fragmentShader = super.createShader( FRAGMENT, gl.FRAGMENT_SHADER);\n        let vertexShader = super.createShader( VERTEX, gl.VERTEX_SHADER);\n\n        // link them together into a new program\n        this.program = gl.createProgram();\n        gl.attachShader(this.program, vertexShader);\n        gl.attachShader(this.program, fragmentShader);\n        gl.linkProgram(this.program);\n \n        this.locations = {\n            transform: gl.getUniformLocation(this.program, 'transform'),\n            color: gl.getAttribLocation(this.program, 'color'),\n            uv: gl.getAttribLocation(this.program, 'uv'),\n            size: gl.getAttribLocation(this.program, 'size')\n        };\n\n\n        if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n            console.error( '[LayerBall] Could not initialize shaders' );\n        }\n\n        return this.program;\n    }\n\n    updateParticles ( elapsedTime ) {\n        for ( let i=0, i2=0, i4=0; i<this.poolSize; i++, i2+=2, i4+=4 ) {\n            \n            this.positions[i2] += elapsedTime * this.settings.velocity.x;\n            this.positions[i2+1] += elapsedTime * this.settings.velocity.y;\n\n            this.colors[i4+3] -= elapsedTime * .9;\n            this.sizes[i] -= elapsedTime * 15;\n        }\n        this.needsUpdate = true;\n    }\n\n    render ( elapsedTime ) {\n\n        this.lifetime += elapsedTime;\n        \n        this.updateParticles( elapsedTime );\n\n        let gl = this.gl;\n\n        // set the vertex buffer to be drawn\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.geometry.buffer);\n\n        // set the shader\n        gl.useProgram(this.program);\n\n        // set the transform\n        gl.uniformMatrix4fv(this.locations.transform, false, this.transform);\n\n        if ( this.needsUpdate ) {\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.colorsBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, this.colors, gl.STATIC_DRAW);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.positionsBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, this.positions, gl.STATIC_DRAW);\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.sizesBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, this.sizes, gl.STATIC_DRAW);\n        }\n\n        // Tell the shader how to get data out of the buffers.\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.colorsBuffer);\n        gl.vertexAttribPointer(this.locations.color, 4, gl.FLOAT, false, 0, 0);\n        gl.enableVertexAttribArray(this.locations.color);\n        \n        gl.bindBuffer(gl.ARRAY_BUFFER, this.positionsBuffer);\n        gl.vertexAttribPointer(this.locations.uv, 2, gl.FLOAT, false, 0, 0);\n        gl.enableVertexAttribArray(this.locations.uv);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.sizesBuffer);\n        gl.vertexAttribPointer(this.locations.size, 1, gl.FLOAT, false, 0, 0);\n        gl.enableVertexAttribArray(this.locations.size);\n\n        gl.drawArrays(gl.POINTS, 0, this.poolSize);\n    }\n\n    spawn ( x, y, size, r, g, b, a ) {\n\n        this.positions[this.current*2] = x;\n        this.positions[this.current*2+1] = y;\n\n        this.colors[this.current*4]   = r;\n        this.colors[this.current*4+1] = g;\n        this.colors[this.current*4+2] = b;\n        this.colors[this.current*4+3] = a;\n\n        this.sizes[this.current] = size;\n\n        this.needsUpdate = true;\n\n        if ( ++this.current > this.poolSize-1 ) this.current = 0;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/layers/ParticleSystem.js\n **/","export default class Clock {\n\n    constructor () {\n        this.timeBefore = Date.now();\n        this.lifeTime = 0;\n        this.elapsedTime = 0;\n    }\n\n    tick () {\n        this.elapsedTime = Date.now() - this.timeBefore;\n        this.timeBefore = Date.now();\n        this.lifeTime += this.elapsedTime;\n        return this.elapsedTime / 1000;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/utils/Clock.js\n **/","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mr.doob / http://mrdoob.com/\n */\n\nvar Detector = {\n\n\tcanvas: !! window.CanvasRenderingContext2D,\n\twebgl: ( function () {\n\n\t\ttry {\n\n\t\t\tvar canvas = document.createElement( 'canvas' ); return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\n\n\t\t} catch ( e ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t} )(),\n\tworkers: !! window.Worker,\n\tfileapi: window.File && window.FileReader && window.FileList && window.Blob,\n\n\tgetWebGLErrorMessage: function () {\n\n\t\tvar element = document.createElement( 'div' );\n\t\telement.id = 'webgl-error-message';\n\t\telement.style.fontFamily = 'monospace';\n\t\telement.style.fontSize = '13px';\n\t\telement.style.fontWeight = 'normal';\n\t\telement.style.textAlign = 'center';\n\t\telement.style.background = '#fff';\n\t\telement.style.color = '#000';\n\t\telement.style.padding = '1.5em';\n\t\telement.style.width = '400px';\n\t\telement.style.margin = '5em auto 0';\n\n\t\tif ( ! this.webgl ) {\n\n\t\t\telement.innerHTML = window.WebGLRenderingContext ? [\n\t\t\t\t'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />',\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n\t\t\t].join( '\\n' ) : [\n\t\t\t\t'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>',\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n\t\t\t].join( '\\n' );\n\n\t\t}\n\n\t\treturn element;\n\n\t},\n\n\taddGetWebGLMessage: function ( parameters ) {\n\n\t\tvar parent, id, element;\n\n\t\tparameters = parameters || {};\n\n\t\tparent = parameters.parent !== undefined ? parameters.parent : document.body;\n\t\tid = parameters.id !== undefined ? parameters.id : 'oldie';\n\n\t\telement = Detector.getWebGLErrorMessage();\n\t\telement.id = id;\n\n\t\tparent.appendChild( element );\n\n\t}\n\n};\n\n// browserify support\nif ( typeof module === 'object' ) {\n\n\tmodule.exports = Detector;\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/vendors/Detector.js\n **/","// stats.js - http://github.com/mrdoob/stats.js\nvar Stats=function(){function f(a,e,b){a=document.createElement(a);a.id=e;a.style.cssText=b;return a}function l(a,e,b){var c=f(\"div\",a,\"padding:0 0 3px 3px;text-align:left;background:\"+b),d=f(\"div\",a+\"Text\",\"font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:\"+e);d.innerHTML=a.toUpperCase();c.appendChild(d);a=f(\"div\",a+\"Graph\",\"width:74px;height:30px;background:\"+e);c.appendChild(a);for(e=0;74>e;e++)a.appendChild(f(\"span\",\"\",\"width:1px;height:30px;float:left;opacity:0.9;background:\"+\nb));return c}function m(a){for(var b=c.children,d=0;d<b.length;d++)b[d].style.display=d===a?\"block\":\"none\";n=a}function p(a,b){a.appendChild(a.firstChild).style.height=Math.min(30,30-30*b)+\"px\"}var q=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,k=q(),r=k,t=0,n=0,c=f(\"div\",\"stats\",\"width:80px;opacity:0.9;cursor:pointer\");c.addEventListener(\"mousedown\",function(a){a.preventDefault();m(++n%c.children.length)},!1);var d=0,u=Infinity,v=0,b=l(\"fps\",\"#0ff\",\"#002\"),\nA=b.children[0],B=b.children[1];c.appendChild(b);var g=0,w=Infinity,x=0,b=l(\"ms\",\"#0f0\",\"#020\"),C=b.children[0],D=b.children[1];c.appendChild(b);if(self.performance&&self.performance.memory){var h=0,y=Infinity,z=0,b=l(\"mb\",\"#f08\",\"#201\"),E=b.children[0],F=b.children[1];c.appendChild(b)}m(n);return{REVISION:14,domElement:c,setMode:m,begin:function(){k=q()},end:function(){var a=q();g=a-k;w=Math.min(w,g);x=Math.max(x,g);C.textContent=(g|0)+\" MS (\"+(w|0)+\"-\"+(x|0)+\")\";p(D,g/200);t++;if(a>r+1E3&&(d=Math.round(1E3*\nt/(a-r)),u=Math.min(u,d),v=Math.max(v,d),A.textContent=d+\" FPS (\"+u+\"-\"+v+\")\",p(B,d/100),r=a,t=0,void 0!==h)){var b=performance.memory.usedJSHeapSize,c=performance.memory.jsHeapSizeLimit;h=Math.round(9.54E-7*b);y=Math.min(y,h);z=Math.max(z,h);E.textContent=h+\" MB (\"+y+\"-\"+z+\")\";p(F,b/c)}return a},update:function(){k=this.end()}}};\"object\"===typeof module&&(module.exports=Stats);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/vendors/Stats.min.js\n **/"],"sourceRoot":""}